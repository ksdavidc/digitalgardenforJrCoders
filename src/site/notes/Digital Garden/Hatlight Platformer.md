---
{"dg-publish":true,"permalink":"/digital-garden/hatlight-platformer/"}
---


# Hatlight Platformer

As always, start by creating your **main sprite** and initializing your **variables**. 

- In this case, it is important that **your main sprite is just a square**. Later, we will make it have a real costume, but for now, just a square.
- Initialize usually means things like **position**, **direction**, and **effects**.
- You will also initialize all your **variables**. 
- At the start you don't always know all your variables, but as this is a platformer, we know we will need `x speed `and `y speed`, so let's initialize those.
- To set the **position**, use this trick: Put your sprite at the starting position in the stage. Then the `go to x` block amd scratch will put the correct numbers in the block.

This is what we get:

```ad-scratch
title: main sprite
~~~scratchblock

when @greenFlag clicked
broadcast [initialize v]


when I receive [initialize v]
set [ghost v] effect to (0)::looks
go to x: (-205) y: (65)
set [x speed v] to [0]
set [y speed v] to [0]
~~~
```

After we initialize, we move left right, then fall, then repeat. The flowchart for this is:



<style>
.container {font-family: sans-serif; text-align: center;}
.button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;}
.excalidraw .App-menu_top .buttonList { display: flex;}
.excalidraw-wrapper { height: 800px; margin: 50px; position: relative;}
:root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;}
</style><script src="https://unpkg.com/react@17/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/@excalidraw/excalidraw@0.12.0/dist/excalidraw.production.min.js"></script><div id="HatlightFalling.excalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1254,"versionNonce":1862750303,"isDeleted":false,"id":"pbYWMc1ELCkT-FFdAdOjv","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-230.83915201822913,"y":-273.93043009440106,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":151,"seed":123374769,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"6JTUU39S","type":"text"}],"updated":1668808075969,"link":null,"locked":false},{"type":"text","version":1373,"versionNonce":789592831,"isDeleted":false,"id":"6JTUU39S","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-206.33915201822913,"y":-251.43043009440106,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":486,"height":106,"seed":451318495,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534217,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y speed by \ngravity","rawText":"Change the y speed by gravity","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"pbYWMc1ELCkT-FFdAdOjv","originalText":"Change the y speed by gravity"},{"type":"rectangle","version":1317,"versionNonce":1393477439,"isDeleted":false,"id":"6v7fxz3OiAJMVK3DSu8oU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-228.30709249931476,"y":-78.10794120922424,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":1041138655,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"352MeiVz","type":"text"},{"id":"APMn23j8Spng2klijuSQO","type":"arrow"},{"id":"9rZ9noFihhgbHvIPsmZ0d","type":"arrow"}],"updated":1668808534218,"link":null,"locked":false},{"type":"text","version":1438,"versionNonce":1066635313,"isDeleted":false,"id":"352MeiVz","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-223.30709249931476,"y":-46.607941209224236,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":525,"height":106,"seed":1391685009,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534220,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y position by \nthe y speed","rawText":"Change the y position by the y speed","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"6v7fxz3OiAJMVK3DSu8oU","originalText":"Change the y position by the y speed"},{"type":"rectangle","version":1375,"versionNonce":395112529,"isDeleted":false,"id":"WasJtU11VxdOvyDuslFJ5","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-225.00340940241233,"y":146.00709185683934,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":74318769,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"mVlvDa8Z","type":"text"},{"id":"9rZ9noFihhgbHvIPsmZ0d","type":"arrow"},{"id":"AYu0YRbL_H6urP9AFavNV","type":"arrow"}],"updated":1668808064751,"link":null,"locked":false},{"type":"text","version":1504,"versionNonce":2082469873,"isDeleted":false,"id":"mVlvDa8Z","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-158.50340940241233,"y":177.50709185683934,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":402,"height":106,"seed":1143606239,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534223,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"If inside a wall or \nplatform, pull out","rawText":"If inside a wall or platform, pull out","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"WasJtU11VxdOvyDuslFJ5","originalText":"If inside a wall or platform, pull out"},{"type":"rectangle","version":1426,"versionNonce":58849361,"isDeleted":false,"id":"MTTvhJ55ijdKv_8p6iFAn","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-221.94110428659536,"y":366.3850418893916,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":964029777,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"DvAEVm7X","type":"text"}],"updated":1668808052047,"link":null,"locked":false},{"type":"text","version":1559,"versionNonce":1341160351,"isDeleted":false,"id":"DvAEVm7X","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-141.44110428659536,"y":397.8850418893916,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":374,"height":106,"seed":858197055,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534228,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Go back to move \nleft/right","rawText":"Go back to move left/right","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"MTTvhJ55ijdKv_8p6iFAn","originalText":"Go back to move left/right"},{"id":"APMn23j8Spng2klijuSQO","type":"arrow","x":2.0899037143640844,"y":-123.21980553342587,"width":1.3597347861842128,"height":44.014442845394726,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1155253407,"version":117,"versionNonce":895760497,"isDeleted":false,"boundElements":null,"updated":1668808534217,"link":null,"locked":false,"points":[[0,0],[1.3597347861842128,44.014442845394726]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"6v7fxz3OiAJMVK3DSu8oU","gap":1.0974214788068934,"focus":-0.12253844389034559},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"9rZ9noFihhgbHvIPsmZ0d","type":"arrow","x":13.844118352521992,"y":93.86997396904127,"width":0.24285567434214173,"height":50.20083778782896,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1101695,"version":88,"versionNonce":1005871633,"isDeleted":false,"boundElements":null,"updated":1668808534221,"link":null,"locked":false,"points":[[0,0],[0.24285567434214173,50.20083778782896]],"lastCommittedPoint":null,"startBinding":{"elementId":"6v7fxz3OiAJMVK3DSu8oU","gap":2.977915178265505,"focus":0.09619684380220084},"endBinding":{"elementId":"WasJtU11VxdOvyDuslFJ5","gap":1.9362800999691103,"focus":-0.10448132730631562},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"AYu0YRbL_H6urP9AFavNV","type":"arrow","x":20.947865617062195,"y":316.00709185683934,"width":1.4168890430255878,"height":52.796964143452044,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1121427889,"version":88,"versionNonce":1971798911,"isDeleted":false,"boundElements":null,"updated":1668808534221,"link":null,"locked":false,"points":[[0,0],[1.4168890430255878,52.796964143452044]],"lastCommittedPoint":null,"startBinding":{"elementId":"WasJtU11VxdOvyDuslFJ5","gap":1,"focus":0.08838438412637474},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow"}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalling.excalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>




<div id="Hatlightoverall.excalidraw.md2"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1112,"versionNonce":536961247,"isDeleted":false,"id":"vCCn1KyOTm3kTJCdZEFqy","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-243.3212758972702,"y":-430.9521617661653,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":191,"height":54,"seed":1827557905,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"7s1xd0G2","type":"text"},{"id":"9ChI4pjzEdpE1PuaM7Rd0","type":"arrow"}],"updated":1668808948805,"link":null,"locked":false},{"type":"text","version":1304,"versionNonce":4548671,"isDeleted":false,"id":"7s1xd0G2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-238.3212758972702,"y":-425.4521617661653,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":181,"height":43,"seed":1566856063,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808948805,"link":"[[Digital Garden/scrap|scrap]]","locked":false,"fontSize":33.79879579338343,"fontFamily":1,"text":"Green Flag","rawText":"Green Flag","baseline":30,"textAlign":"center","verticalAlign":"middle","containerId":"vCCn1KyOTm3kTJCdZEFqy","originalText":"Green Flag"},{"type":"rectangle","version":925,"versionNonce":1676206225,"isDeleted":false,"id":"39MHG9i3nslr5PnoAzajQ","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-245.51661461116623,"y":-355.9342916347737,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":193,"height":63,"seed":1482418161,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"fSZmZufp","type":"text"}],"updated":1668808948805,"link":null,"locked":false},{"type":"text","version":1043,"versionNonce":1359743071,"isDeleted":false,"id":"fSZmZufp","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-240.01661461116623,"y":-350.9342916347737,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":182,"height":53,"seed":1504414623,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808948805,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Initialize","rawText":"Initialize","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"39MHG9i3nslr5PnoAzajQ","originalText":"Initialize"},{"type":"rectangle","version":994,"versionNonce":1409281279,"isDeleted":false,"id":"EuTGTtNl4k9Ez1Hi6ItdW","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-245.93155242032367,"y":-256.79532421039653,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":175,"height":53,"seed":291226065,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"0CdgCCzs","type":"text"},{"id":"Rm4Mi7J-DXe9ykhundstN","type":"arrow"}],"updated":1668808948805,"link":null,"locked":false},{"type":"text","version":1110,"versionNonce":1816765567,"isDeleted":false,"id":"0CdgCCzs","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-240.43155242032367,"y":-251.79532421039653,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":164,"height":43,"seed":345423807,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808948805,"link":null,"locked":false,"fontSize":33.59958206026456,"fontFamily":1,"text":"left/Right","rawText":"left/Right","baseline":30,"textAlign":"center","verticalAlign":"middle","containerId":"EuTGTtNl4k9Ez1Hi6ItdW","originalText":"left/Right"},{"type":"rectangle","version":1123,"versionNonce":1577100913,"isDeleted":false,"id":"32HfOOrvhJ0dgTd1hVKRR","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-187.22255494222588,"y":-162.58539146332714,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":77,"height":73,"seed":889544625,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"LWi1NKHV","type":"text"},{"id":"ghR0xSbPCIXNxmpVH6xfH","type":"arrow"},{"id":"Rm4Mi7J-DXe9ykhundstN","type":"arrow"}],"updated":1668808948805,"link":null,"locked":false},{"type":"text","version":1253,"versionNonce":1639890079,"isDeleted":false,"id":"LWi1NKHV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-181.72255494222588,"y":-149.08539146332714,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":66,"height":46,"seed":273051615,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808948805,"link":null,"locked":false,"fontSize":36.32879215365937,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":32,"textAlign":"center","verticalAlign":"middle","containerId":"32HfOOrvhJ0dgTd1hVKRR","originalText":"Fall"},{"type":"arrow","version":3096,"versionNonce":40664625,"isDeleted":false,"id":"9ChI4pjzEdpE1PuaM7Rd0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-145.65682187158023,"y":-375.9388537985595,"strokeColor":"#000000","backgroundColor":"transparent","width":2.48217632892566,"height":42.94267662501124,"seed":1367359889,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808989033,"link":null,"locked":false,"startBinding":{"elementId":"vCCn1KyOTm3kTJCdZEFqy","gap":1.0133079676058172,"focus":-0.005617377656340597},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2.48217632892566,42.94267662501124]]},{"type":"arrow","version":2098,"versionNonce":1618043249,"isDeleted":false,"id":"vnqNp3fF7NktZ7BOYkGmW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-143.32101294765346,"y":-295.8861840892546,"strokeColor":"#000000","backgroundColor":"transparent","width":1.0543915570658773,"height":49.07639898494726,"seed":919280639,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808948805,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.0543915570658773,49.07639898494726]]},{"type":"arrow","version":1747,"versionNonce":1367314449,"isDeleted":false,"id":"ghR0xSbPCIXNxmpVH6xfH","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-149.28027391685703,"y":-207.40401198024824,"strokeColor":"#000000","backgroundColor":"transparent","width":2.8075789243070233,"height":35.08528010519592,"seed":1141106545,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808989059,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"32HfOOrvhJ0dgTd1hVKRR","gap":9.73334041172517,"focus":-0.17056561530373746},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2.8075789243070233,35.08528010519592]]},{"type":"arrow","version":4601,"versionNonce":873330047,"isDeleted":false,"id":"Rm4Mi7J-DXe9ykhundstN","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-146.4990231492344,"y":-84.3531356704228,"strokeColor":"#000000","backgroundColor":"transparent","width":112.93057556955792,"height":174.54915151598215,"seed":1545946143,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808989060,"link":null,"locked":false,"startBinding":{"elementId":"32HfOOrvhJ0dgTd1hVKRR","gap":5.232255792904329,"focus":0.27390746705883023},"endBinding":{"elementId":"EuTGTtNl4k9Ez1Hi6ItdW","gap":1.7282528550938423,"focus":-0.5724575221207647},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[13.576988282242542,33.742797436587864],[108.75647057915141,17.438985628646254],[112.93057556955792,-122.31803646408422],[77.29572358400458,-140.80635407939428]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Hatlightoverall.excalidraw.md2");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

The hexagon means that left/right is the start of a loop. In this case the loop goes forever.

So, let's put in  left/right and fall stacks.

```ad-scratch
title: main sprite
~~~scratchblock
when @greenFlag clicked
   broadcast [initialize v]
   broadcast [move left / right v]


when I receive [move left / right v]
our left right routine will go here
broadcast [fall v]


when I receive [fall v]
our fall routine goes here
broadcast [move left / right v]

~~~
```

So let's do the left right routine. The basic routine is this:

<div id="HatlightmoveLeftRight.excalidraw.md3"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1425,"versionNonce":1329893503,"isDeleted":false,"id":"wcDy_w7SXSk9ohmQLvgLS","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-251.91063961401403,"y":-237.47329147741908,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":554,"height":96,"seed":998814719,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"QREgwiBu","type":"text"},{"id":"8mSenxo5ScdrK-QKmCdth","type":"arrow"}],"updated":1668807749003,"link":null,"locked":false},{"type":"text","version":1604,"versionNonce":2144777425,"isDeleted":false,"id":"QREgwiBu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-215.41063961401403,"y":-232.47329147741908,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":481,"height":86,"seed":629919601,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808516622,"link":"[[Digital Garden/scrap|scrap]]","locked":false,"fontSize":33.79879579338343,"fontFamily":1,"text":"Detect arrows and set the \nx-speed variable","rawText":"Detect arrows and set the x-speed variable","baseline":73,"textAlign":"center","verticalAlign":"middle","containerId":"wcDy_w7SXSk9ohmQLvgLS","originalText":"Detect arrows and set the x-speed variable"},{"type":"rectangle","version":1275,"versionNonce":1589267505,"isDeleted":false,"id":"NnmCu8ZA7uLUagOYccVAu","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-252.18183084057938,"y":-103.46953861270862,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":151,"seed":628087839,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"Adu5VhNU","type":"text"},{"id":"8mSenxo5ScdrK-QKmCdth","type":"arrow"},{"id":"m71vF6jSLhQz_6pkDWalX","type":"arrow"}],"updated":1668807763818,"link":null,"locked":false},{"type":"text","version":1395,"versionNonce":1583454463,"isDeleted":false,"id":"Adu5VhNU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-216.18183084057938,"y":-80.96953861270862,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":463,"height":106,"seed":253933905,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808516625,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Keep x-speed below a \nmaximum speed","rawText":"Keep x-speed below a maximum speed","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"NnmCu8ZA7uLUagOYccVAu","originalText":"Keep x-speed below a maximum speed"},{"type":"rectangle","version":1351,"versionNonce":1004041919,"isDeleted":false,"id":"Q5UEJ4Rxw0rzNOBRFvbZY","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-248.0279511322846,"y":81.86231029613606,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":100,"seed":825541873,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bYdWrPcc","type":"text"},{"id":"m71vF6jSLhQz_6pkDWalX","type":"arrow"},{"id":"dqb1Nxa_P-lBcXJnfPGen","type":"arrow"}],"updated":1668807781074,"link":null,"locked":false},{"type":"text","version":1472,"versionNonce":2097443999,"isDeleted":false,"id":"bYdWrPcc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-189.0279511322846,"y":105.36231029613606,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":417,"height":53,"seed":1025179295,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668807765684,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"change x by x-speed","rawText":"change x by x-speed","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"Q5UEJ4Rxw0rzNOBRFvbZY","originalText":"change x by x-speed"},{"type":"rectangle","version":1437,"versionNonce":1949910751,"isDeleted":false,"id":"I2eU_tRX6JKN6bwsBvAmS","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-240.2663287188555,"y":229.67138176995365,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":74,"seed":15431025,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"M2QHvzLB","type":"text"},{"id":"dqb1Nxa_P-lBcXJnfPGen","type":"arrow"}],"updated":1668807781074,"link":null,"locked":false},{"type":"text","version":1562,"versionNonce":402889567,"isDeleted":false,"id":"M2QHvzLB","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-10.766328718855505,"y":240.17138176995365,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":76,"height":53,"seed":1841665567,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668807776334,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"I2eU_tRX6JKN6bwsBvAmS","originalText":"Fall"},{"type":"arrow","version":543,"versionNonce":497676977,"isDeleted":false,"id":"8mSenxo5ScdrK-QKmCdth","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-24.82286662352641,"y":-140.47329147741908,"strokeColor":"#000000","backgroundColor":"transparent","width":2.9181612085048414,"height":34.506145877228946,"seed":1976403985,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808516623,"link":null,"locked":false,"startBinding":{"elementId":"wcDy_w7SXSk9ohmQLvgLS","gap":1,"focus":0.16284224009919607},"endBinding":{"elementId":"NnmCu8ZA7uLUagOYccVAu","gap":2.4976069874814897,"focus":-0.18130019673081207},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2.9181612085048414,34.506145877228946]]},{"type":"arrow","version":244,"versionNonce":635707679,"isDeleted":false,"id":"m71vF6jSLhQz_6pkDWalX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-15.589505057040913,"y":51.854662833339546,"strokeColor":"#000000","backgroundColor":"transparent","width":2.355311819704294,"height":27.501751136782886,"seed":1640182481,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808516626,"link":null,"locked":false,"startBinding":{"elementId":"NnmCu8ZA7uLUagOYccVAu","gap":4.324201446048164,"focus":0.13776891935694174},"endBinding":{"elementId":"Q5UEJ4Rxw0rzNOBRFvbZY","gap":2.5058963260136267,"focus":-0.10379461253620226},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2.355311819704294,27.501751136782886]]},{"type":"arrow","version":82,"versionNonce":1417127263,"isDeleted":false,"id":"dqb1Nxa_P-lBcXJnfPGen","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":5.522106933593818,"y":183.00553506387251,"strokeColor":"#000000","backgroundColor":"transparent","width":0.35595308338937315,"height":45.66584670608114,"seed":270372369,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808516629,"link":null,"locked":false,"startBinding":{"elementId":"Q5UEJ4Rxw0rzNOBRFvbZY","gap":1.1432247677364558,"focus":0.05058534276254917},"endBinding":{"elementId":"I2eU_tRX6JKN6bwsBvAmS","gap":1,"focus":-0.08351264228812778},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.35595308338937315,45.66584670608114]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"center","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightmoveLeftRight.excalidraw.md3");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

And here is the code

```ad-scratch
title: main sprite
~~~scratchblock
when I receive [move left / right v]
set xspeed::custom
keep speed below max::custom
change x by (x speed)
broadcast [fall v]
~~~
```



Changing the speed is now easy. If no key is being held, then slow the speed down. Otherwise, speed  up in the direction we are going.

```ad-scratch
title: 
~~~scratchblock

define set xspeed
if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
   no key is being pressed so we decrease speed
   if moving left, go a little less left, if going right, go a little less right.
   if moving left, make xspeed bigger, if going right, make xspeed smaller
   moving left +1 right -1
   moving left means speed IS LESS THAN 0,  right means speed IS MORE THAN 0
   change [x speed v] by (<(x speed) \< [0]> - <(x speed) \> [0]>)
else
    /: [else go in direction of arrow]::custom
    change [x speed v] by (<key [right arrow v] pressed?> - <key [left arrow v] pressed?>)
end


~~~
```

Keeping the speed below the max is easy, but we have to remember that left and right are different.
```ad-scratch
title: 
~~~scratchblock


define keep speed below max
/: [set maximum speed]::custom
moving right:
if <(x speed) \> [4]> then
    set [x speed v] to [4]
end
moving left:
if <(x speed) \< [-4]> then
    set [x speed v] to [-4]
end
~~~
```

# Falling

Next we will teach our guy to fall. First, we need a platform or wall for the character to fall onto. So make one. 

Our basic fall routine is 

<div id="HatlightFalling.excalidraw.md4"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1254,"versionNonce":1862750303,"isDeleted":false,"id":"pbYWMc1ELCkT-FFdAdOjv","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-230.83915201822913,"y":-273.93043009440106,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":151,"seed":123374769,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"6JTUU39S","type":"text"}],"updated":1668808075969,"link":null,"locked":false},{"type":"text","version":1373,"versionNonce":789592831,"isDeleted":false,"id":"6JTUU39S","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-206.33915201822913,"y":-251.43043009440106,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":486,"height":106,"seed":451318495,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534217,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y speed by \ngravity","rawText":"Change the y speed by gravity","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"pbYWMc1ELCkT-FFdAdOjv","originalText":"Change the y speed by gravity"},{"type":"rectangle","version":1317,"versionNonce":1393477439,"isDeleted":false,"id":"6v7fxz3OiAJMVK3DSu8oU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-228.30709249931476,"y":-78.10794120922424,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":1041138655,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"352MeiVz","type":"text"},{"id":"APMn23j8Spng2klijuSQO","type":"arrow"},{"id":"9rZ9noFihhgbHvIPsmZ0d","type":"arrow"}],"updated":1668808534218,"link":null,"locked":false},{"type":"text","version":1438,"versionNonce":1066635313,"isDeleted":false,"id":"352MeiVz","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-223.30709249931476,"y":-46.607941209224236,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":525,"height":106,"seed":1391685009,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534220,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y position by \nthe y speed","rawText":"Change the y position by the y speed","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"6v7fxz3OiAJMVK3DSu8oU","originalText":"Change the y position by the y speed"},{"type":"rectangle","version":1375,"versionNonce":395112529,"isDeleted":false,"id":"WasJtU11VxdOvyDuslFJ5","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-225.00340940241233,"y":146.00709185683934,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":74318769,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"mVlvDa8Z","type":"text"},{"id":"9rZ9noFihhgbHvIPsmZ0d","type":"arrow"},{"id":"AYu0YRbL_H6urP9AFavNV","type":"arrow"}],"updated":1668808064751,"link":null,"locked":false},{"type":"text","version":1504,"versionNonce":2082469873,"isDeleted":false,"id":"mVlvDa8Z","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-158.50340940241233,"y":177.50709185683934,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":402,"height":106,"seed":1143606239,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534223,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"If inside a wall or \nplatform, pull out","rawText":"If inside a wall or platform, pull out","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"WasJtU11VxdOvyDuslFJ5","originalText":"If inside a wall or platform, pull out"},{"type":"rectangle","version":1426,"versionNonce":58849361,"isDeleted":false,"id":"MTTvhJ55ijdKv_8p6iFAn","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-221.94110428659536,"y":366.3850418893916,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":964029777,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"DvAEVm7X","type":"text"}],"updated":1668808052047,"link":null,"locked":false},{"type":"text","version":1559,"versionNonce":1341160351,"isDeleted":false,"id":"DvAEVm7X","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-141.44110428659536,"y":397.8850418893916,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":374,"height":106,"seed":858197055,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808534228,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Go back to move \nleft/right","rawText":"Go back to move left/right","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"MTTvhJ55ijdKv_8p6iFAn","originalText":"Go back to move left/right"},{"id":"APMn23j8Spng2klijuSQO","type":"arrow","x":2.0899037143640844,"y":-123.21980553342587,"width":1.3597347861842128,"height":44.014442845394726,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1155253407,"version":117,"versionNonce":895760497,"isDeleted":false,"boundElements":null,"updated":1668808534217,"link":null,"locked":false,"points":[[0,0],[1.3597347861842128,44.014442845394726]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"6v7fxz3OiAJMVK3DSu8oU","gap":1.0974214788068934,"focus":-0.12253844389034559},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"9rZ9noFihhgbHvIPsmZ0d","type":"arrow","x":13.844118352521992,"y":93.86997396904127,"width":0.24285567434214173,"height":50.20083778782896,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1101695,"version":88,"versionNonce":1005871633,"isDeleted":false,"boundElements":null,"updated":1668808534221,"link":null,"locked":false,"points":[[0,0],[0.24285567434214173,50.20083778782896]],"lastCommittedPoint":null,"startBinding":{"elementId":"6v7fxz3OiAJMVK3DSu8oU","gap":2.977915178265505,"focus":0.09619684380220084},"endBinding":{"elementId":"WasJtU11VxdOvyDuslFJ5","gap":1.9362800999691103,"focus":-0.10448132730631562},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"AYu0YRbL_H6urP9AFavNV","type":"arrow","x":20.947865617062195,"y":316.00709185683934,"width":1.4168890430255878,"height":52.796964143452044,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1121427889,"version":88,"versionNonce":1971798911,"isDeleted":false,"boundElements":null,"updated":1668808534221,"link":null,"locked":false,"points":[[0,0],[1.4168890430255878,52.796964143452044]],"lastCommittedPoint":null,"startBinding":{"elementId":"WasJtU11VxdOvyDuslFJ5","gap":1,"focus":0.08838438412637474},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow"}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalling.excalidraw.md4");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

We could change the y position by y speed in big jumps, but it might turn out we will jump beyond the platform, so instead we will change y by 1 step y-speed times. 


```ad-scratch
title: 
~~~scratchblock

when I receive [fall v]
change [y speed v] by (-1)
change y  by 1 (y speed) times or until touching wall::custom
/: [At this point we may be touching a wall]::custom
/: [if so, we should pull out of the wall]::custom
/: [our speed +/- tells us whether we are either moving up (ceiling\) or down (floor\)]::custom
pull up or down if touching walls depending on whether we were <(y speed) \> [0]> or not::custom
broadcast [move left / right v]

~~~
```


To be continued...
