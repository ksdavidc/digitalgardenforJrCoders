---
{"dg-publish":true,"permalink":"/digital-garden/hatlight-platformer/"}
---


# Hatlight Platformer

As always, start by creating your **main sprite** and initializing your **variables**. 

- In this case, it is important that **your main sprite is just a square**. Later, we will make it have a real costume, but for now, just a square.
- Initialize usually means things like **position**, **direction**, and **effects**.
- You will also initialize all your **variables**. 
- At the start you don't always know all your variables, but as this is a platformer, we know we will need `x speed `and `y speed`, so let's initialize those.
- To set the **position**, use this trick: Put your sprite at the starting position in the stage. Then the `go to x` block amd scratch will put the correct numbers in the block.

This is what we get:

```ad-scratch
title: main sprite
~~~scratchblock

when @greenFlag clicked
broadcast [initialize v]


when I receive [initialize v]
set [ghost v] effect to (0)::looks
go to x: (-205) y: (65)
set [x speed v] to [0]
set [y speed v] to [0]
~~~
```

After we initialize, we move left right, then fall, then repeat. The flowchart for this is:

<style>
.container {font-family: sans-serif; text-align: center;}
.button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;}
.excalidraw .App-menu_top .buttonList { display: flex;}
.excalidraw-wrapper { height: 800px; margin: 50px; position: relative;}
:root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;}
</style><script src="https://unpkg.com/react@17/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/@excalidraw/excalidraw@0.12.0/dist/excalidraw.production.min.js"></script><div id="Hatlightoverall.excalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1544,"versionNonce":2145659295,"isDeleted":false,"id":"RMNqwfWlgfbMpYooeJoeX","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-327.7608418906913,"y":-1170.4777724331725,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":321,"height":80,"seed":1239531121,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bLuBw5Gk","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"}],"updated":1668809703478,"link":null,"locked":false},{"type":"text","version":1683,"versionNonce":2130969553,"isDeleted":false,"id":"bLuBw5Gk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-279.2608418906913,"y":-1156.9777724331725,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":224,"height":53,"seed":217341215,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809703478,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Green Flag","rawText":"Green Flag","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"RMNqwfWlgfbMpYooeJoeX","originalText":"Green Flag"},{"type":"rectangle","version":1646,"versionNonce":2083079455,"isDeleted":false,"id":"3KIpf-rkzikNMb_aR0m7y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-321.6489754778724,"y":-1023.7914363356381,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":312,"height":94,"seed":820168785,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ZCCwgZWZ","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"}],"updated":1668809837288,"link":null,"locked":false},{"type":"text","version":1779,"versionNonce":701522001,"isDeleted":false,"id":"ZCCwgZWZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-256.6489754778724,"y":-1003.2914363356381,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":182,"height":53,"seed":1506369855,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809837288,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Initialize","rawText":"Initialize","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"3KIpf-rkzikNMb_aR0m7y","originalText":"Initialize"},{"type":"rectangle","version":1675,"versionNonce":13486193,"isDeleted":false,"id":"g3GQAZzBP1tmYREzU3GFV","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-347.11676076280065,"y":-869.9225472838204,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":367,"height":74,"seed":182949425,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"y03U4cUU","type":"text"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"},{"id":"rOdClYNLCyfLF1jbUwU8F","type":"arrow"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"}],"updated":1668809838673,"link":null,"locked":false},{"type":"text","version":1815,"versionNonce":304476959,"isDeleted":false,"id":"y03U4cUU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-328.11676076280065,"y":-859.4225472838204,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":329,"height":53,"seed":698933599,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809838673,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Move Left right","rawText":"Move Left right","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"g3GQAZzBP1tmYREzU3GFV","originalText":"Move Left right"},{"type":"rectangle","version":1779,"versionNonce":2037407135,"isDeleted":false,"id":"sRV2I3u5YmLmW1mMZtcg3","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-291.5359897378928,"y":-733.9003708506589,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":262,"height":80,"seed":1255647249,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"XFDnTuBL","type":"text"},{"id":"rOdClYNLCyfLF1jbUwU8F","type":"arrow"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"}],"updated":1668809840817,"link":null,"locked":false},{"type":"text","version":1908,"versionNonce":1518669777,"isDeleted":false,"id":"XFDnTuBL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-198.5359897378928,"y":-720.4003708506589,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":76,"height":53,"seed":769875327,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809840817,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"sRV2I3u5YmLmW1mMZtcg3","originalText":"Fall"},{"type":"arrow","version":894,"versionNonce":1113730609,"isDeleted":false,"id":"CZZBlZLQcMsvBM3Y59OCy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-165.29332381157542,"y":-1088.9521301720024,"strokeColor":"#000000","backgroundColor":"transparent","width":6.08625699520789,"height":64.16069383636432,"seed":447380977,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809837288,"link":null,"locked":false,"startBinding":{"elementId":"RMNqwfWlgfbMpYooeJoeX","gap":1.5256422611701055,"focus":-0.03503457315906321},"endBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","gap":1,"focus":-0.06409054010653806},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-6.08625699520789,64.16069383636432]]},{"type":"arrow","version":1214,"versionNonce":811087679,"isDeleted":false,"id":"ZGWdRa8JACOlC9W9gZeZ8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-181.42538080991721,"y":-928.7636585578603,"strokeColor":"#000000","backgroundColor":"transparent","width":0.8571893124201324,"height":57.813333496261976,"seed":431576479,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809838674,"link":null,"locked":false,"startBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","gap":1.0277777777777781,"focus":0.09619319606044506},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","gap":1.0277777777777781,"focus":-0.10448132730631575},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.8571893124201324,57.813333496261976]]},{"type":"arrow","version":876,"versionNonce":1742007729,"isDeleted":false,"id":"rOdClYNLCyfLF1jbUwU8F","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-157.02964281074014,"y":-794.8947695060427,"strokeColor":"#000000","backgroundColor":"transparent","width":3.979893627919182,"height":52.74983854753407,"seed":2036832209,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809840817,"link":null,"locked":false,"startBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","gap":1.0277777777777146,"focus":-0.05087433664670646},"endBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","gap":8.244560107849793,"focus":-0.030693831789847976},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-3.979893627919182,52.74983854753407]]},{"type":"arrow","version":2284,"versionNonce":457876593,"isDeleted":false,"id":"SgfLADjg34eKJoEx705pv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-240.51243868748037,"y":-649.1913122269744,"strokeColor":"#000000","backgroundColor":"transparent","width":360.3711870488704,"height":228.07440111126095,"seed":1763690303,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809856858,"link":null,"locked":false,"startBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","focus":0.7435564056870121,"gap":4.709058623684427},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","focus":-0.7832206169105584,"gap":9.178032963755982},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[46.062120168511456,39.55391812835296],[288.38663423950425,8.30509812006028],[360.3711870488704,-143.65701118141624],[269.5737108884357,-188.520482982908]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Hatlightoverall.excalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

The hexagon means that left/right is the start of a loop. In this case the loop goes forever.

So, let's put in  left/right and fall stacks.

```ad-scratch
title: main sprite
~~~scratchblock
when @greenFlag clicked
   broadcast [initialize v]
   broadcast [move left / right v]


when I receive [move left / right v]
our left right routine will go here
broadcast [fall v]


when I receive [fall v]
our fall routine goes here
broadcast [move left / right v]

~~~
```

So let's do the left right routine. The basic routine is this:

<div id="HatlightmoveLeftRight.excalidraw.md2"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1631,"versionNonce":585388383,"isDeleted":false,"id":"j46Q-mIB_RMtLqBuMi9Jo","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-383.8279541127483,"y":-329.68106953418226,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":355,"height":97,"seed":216207345,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"hoKKMoqj","type":"text"},{"id":"gKKjxwppjVZFkGfKIubPj","type":"arrow"}],"updated":1668810167072,"link":null,"locked":false},{"type":"text","version":1773,"versionNonce":1060709823,"isDeleted":false,"id":"hoKKMoqj","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-348.8279541127483,"y":-306.18106953418226,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":285,"height":50,"seed":1921704863,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810145932,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Detect arrows and set the \nx-speed variable","rawText":"Detect arrows and set the x-speed variable","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"j46Q-mIB_RMtLqBuMi9Jo","originalText":"Detect arrows and set the x-speed variable"},{"type":"rectangle","version":1737,"versionNonce":560213023,"isDeleted":false,"id":"IoJwQQFPcnide1ayTmbpU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-336.3082220634403,"y":-188.45314336311844,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":297,"height":81,"seed":2059266513,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"KNDBm7n1","type":"text"},{"id":"gKKjxwppjVZFkGfKIubPj","type":"arrow"},{"id":"s9wFQwYotNcTV8FUmMlr4","type":"arrow"}],"updated":1668810169267,"link":null,"locked":false},{"type":"text","version":1874,"versionNonce":928737617,"isDeleted":false,"id":"KNDBm7n1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-298.8082220634403,"y":-172.95314336311844,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":222,"height":50,"seed":130750399,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810169267,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Keep x-speed below a \nmaximum speed","rawText":"Keep x-speed below a maximum speed","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"IoJwQQFPcnide1ayTmbpU","originalText":"Keep x-speed below a maximum speed"},{"type":"rectangle","version":1808,"versionNonce":826030705,"isDeleted":false,"id":"ABGizyKxq-GGhHL1bSIUj","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-310.5726812913834,"y":-58.324972180479676,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":253,"height":47,"seed":2145552305,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"llvdtr75","type":"text"},{"id":"s9wFQwYotNcTV8FUmMlr4","type":"arrow"},{"id":"dKCsiULa4aCptAMA4JZvi","type":"arrow"}],"updated":1668810170269,"link":null,"locked":false},{"type":"text","version":1949,"versionNonce":999268639,"isDeleted":false,"id":"llvdtr75","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-284.0726812913834,"y":-47.324972180479676,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":200,"height":25,"seed":1261422559,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810170269,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"change x by x-speed","rawText":"change x by x-speed","baseline":18,"textAlign":"center","verticalAlign":"middle","containerId":"ABGizyKxq-GGhHL1bSIUj","originalText":"change x by x-speed"},{"type":"rectangle","version":1890,"versionNonce":1979001073,"isDeleted":false,"id":"ZLp42ksZ46S107PNBhQAh","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-243.4970515808136,"y":36.95129959198954,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":130,"height":42,"seed":376990097,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"7coyg3pg","type":"text"},{"id":"dKCsiULa4aCptAMA4JZvi","type":"arrow"}],"updated":1668810175907,"link":null,"locked":false},{"type":"text","version":2020,"versionNonce":1845680799,"isDeleted":false,"id":"7coyg3pg","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-197.4970515808136,"y":45.45129959198954,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":38,"height":25,"seed":2060022783,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810175907,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":18,"textAlign":"center","verticalAlign":"middle","containerId":"ZLp42ksZ46S107PNBhQAh","originalText":"Fall"},{"type":"arrow","version":1297,"versionNonce":1537480497,"isDeleted":false,"id":"gKKjxwppjVZFkGfKIubPj","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-198.9643020538358,"y":-231.66856953418227,"strokeColor":"#000000","backgroundColor":"transparent","width":0.8012316887051725,"height":42.20292617106381,"seed":129437553,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810169268,"link":null,"locked":false,"startBinding":{"elementId":"j46Q-mIB_RMtLqBuMi9Jo","gap":1.0125,"focus":-0.03505763772059004},"endBinding":{"elementId":"IoJwQQFPcnide1ayTmbpU","gap":1.0125,"focus":-0.06409054010653767},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0.8012316887051725,42.20292617106381]]},{"type":"arrow","version":1741,"versionNonce":475800895,"isDeleted":false,"id":"s9wFQwYotNcTV8FUmMlr4","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-200.4799931969698,"y":-106.3601201073045,"strokeColor":"#000000","backgroundColor":"transparent","width":2.0241161226511792,"height":46.94212467101086,"seed":1050188831,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810170269,"link":null,"locked":false,"startBinding":{"elementId":"IoJwQQFPcnide1ayTmbpU","gap":1.0930232558139534,"focus":0.09619142614023048},"endBinding":{"elementId":"ABGizyKxq-GGhHL1bSIUj","gap":1.0930232558139534,"focus":-0.1044813273063159},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2.0241161226511792,46.94212467101086]]},{"type":"arrow","version":1443,"versionNonce":1596731071,"isDeleted":false,"id":"dKCsiULa4aCptAMA4JZvi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-178.3648692098507,"y":-10.300581936577235,"strokeColor":"#000000","backgroundColor":"transparent","width":1.4316105448390317,"height":45.498135660797885,"seed":166066513,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810175908,"link":null,"locked":false,"startBinding":{"elementId":"ABGizyKxq-GGhHL1bSIUj","gap":1.024390243902439,"focus":-0.050870156959174996},"endBinding":{"elementId":"ZLp42ksZ46S107PNBhQAh","gap":1.753745867768886,"focus":-0.03069383178984813},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.4316105448390317,45.498135660797885]]},{"type":"arrow","version":777,"versionNonce":344794673,"isDeleted":true,"id":"8mSenxo5ScdrK-QKmCdth","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-24.719499838338145,"y":-140.06632940059615,"strokeColor":"#000000","backgroundColor":"transparent","width":247.14660121458382,"height":91.61474013358611,"seed":1976403985,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810167072,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"j46Q-mIB_RMtLqBuMi9Jo","gap":1,"focus":0.6462077657019423},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-247.14660121458382,-91.61474013358611]]},{"type":"arrow","version":376,"versionNonce":1556646033,"isDeleted":true,"id":"m71vF6jSLhQz_6pkDWalX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":114.29059889377746,"y":100.20991616514102,"strokeColor":"#000000","backgroundColor":"transparent","width":173.65500920327563,"height":51.55700836765029,"seed":1640182481,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810162200,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-173.65500920327563,-51.55700836765029]]},{"type":"arrow","version":109,"versionNonce":1677350993,"isDeleted":true,"id":"dqb1Nxa_P-lBcXJnfPGen","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":5.321599775975503,"y":182.98961565900123,"strokeColor":"#000000","backgroundColor":"transparent","width":0.31015644498687234,"height":45.66580601597701,"seed":270372369,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810163165,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.31015644498687234,45.66580601597701]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"center","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightmoveLeftRight.excalidraw.md2");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

And here is the code

```ad-scratch
title: main sprite
~~~scratchblock
when I receive [move left / right v]
set xspeed::custom
keep speed below max::custom
change x by (x speed)
broadcast [fall v]
~~~
```



Changing the speed is now easy. If no key is being held, then slow the speed down. Otherwise, speed  up in the direction we are going.

```ad-scratch
title: 
~~~scratchblock

define set xspeed
if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
   no key is being pressed so we decrease speed
   if moving left, go a little less left, if going right, go a little less right.
   if moving left, make xspeed bigger, if going right, make xspeed smaller
   moving left +1 right -1
   moving left means speed IS LESS THAN 0,  right means speed IS MORE THAN 0
   change [x speed v] by (<(x speed) \< [0]> - <(x speed) \> [0]>)
else
    /: [else go in direction of arrow]::custom
    change [x speed v] by (<key [right arrow v] pressed?> - <key [left arrow v] pressed?>)
end


~~~
```

Keeping the speed below the max is easy, but we have to remember that left and right are different.
```ad-scratch
title: 
~~~scratchblock


define keep speed below max
/: [set maximum speed]::custom
moving right:
if <(x speed) \> [4]> then
    set [x speed v] to [4]
end
moving left:
if <(x speed) \< [-4]> then
    set [x speed v] to [-4]
end
~~~
```

# Falling

Next we will teach our guy to fall. First, we need a platform or wall for the character to fall onto. So make one. 

Our basic fall routine is 

<div id="HatlightFalling.excalidraw.md3"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1508,"versionNonce":1046092113,"isDeleted":false,"id":"STdU6Qrgl8NloQz5qXm4Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":86.8903498573917,"y":-22938.98046923442,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":151,"seed":474785375,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"etcObaWE","type":"text"}],"updated":1668809960873,"link":null,"locked":false},{"type":"text","version":1628,"versionNonce":2129371199,"isDeleted":false,"id":"etcObaWE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":111.3903498573917,"y":-22916.48046923442,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":486,"height":106,"seed":419345169,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809960873,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y speed by \ngravity","rawText":"Change the y speed by gravity","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"STdU6Qrgl8NloQz5qXm4Y","originalText":"Change the y speed by gravity"},{"type":"rectangle","version":1571,"versionNonce":1867302705,"isDeleted":false,"id":"Uq487qTt78DHOKArOPqTe","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":89.42240937630606,"y":-22743.157980349242,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":29786751,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ou3N2S3J","type":"text"},{"id":"pl20Yi0maQgIh05RTWlDZ","type":"arrow"},{"id":"k-drX4b5Tm5k2foswC8Jm","type":"arrow"}],"updated":1668809960873,"link":null,"locked":false},{"type":"text","version":1693,"versionNonce":237715551,"isDeleted":false,"id":"ou3N2S3J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":94.42240937630606,"y":-22711.657980349242,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":525,"height":106,"seed":1169697009,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809960873,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y position by \nthe y speed","rawText":"Change the y position by the y speed","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"Uq487qTt78DHOKArOPqTe","originalText":"Change the y position by the y speed"},{"type":"rectangle","version":1629,"versionNonce":439840497,"isDeleted":false,"id":"em-frhxxp0ZdWPYbcWn2z","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":92.7260924732085,"y":-22519.04294728318,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":804248223,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"gMC1xeGx","type":"text"},{"id":"k-drX4b5Tm5k2foswC8Jm","type":"arrow"},{"id":"21qfct9As10dX5qSegqaI","type":"arrow"}],"updated":1668809960873,"link":null,"locked":false},{"type":"text","version":1759,"versionNonce":1517286559,"isDeleted":false,"id":"gMC1xeGx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":159.2260924732085,"y":-22487.54294728318,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":402,"height":106,"seed":1804067537,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809960873,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"If inside a wall or \nplatform, pull out","rawText":"If inside a wall or platform, pull out","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"em-frhxxp0ZdWPYbcWn2z","originalText":"If inside a wall or platform, pull out"},{"type":"rectangle","version":1680,"versionNonce":1558914737,"isDeleted":false,"id":"i2P1R4q4JoJ1ry3s2Xq4i","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":95.78839758902552,"y":-22298.664997250624,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":1534668479,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"gXVWwZ3X","type":"text"}],"updated":1668809960873,"link":null,"locked":false},{"type":"text","version":1814,"versionNonce":398760159,"isDeleted":false,"id":"gXVWwZ3X","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":176.28839758902552,"y":-22267.164997250624,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":374,"height":106,"seed":386228401,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809960873,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Go back to move \nleft/right","rawText":"Go back to move left/right","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"i2P1R4q4JoJ1ry3s2Xq4i","originalText":"Go back to move left/right"},{"type":"arrow","version":629,"versionNonce":1458384159,"isDeleted":false,"id":"pl20Yi0maQgIh05RTWlDZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":319.81940558998497,"y":-22788.269844673443,"strokeColor":"#000000","backgroundColor":"transparent","width":1.3597347861842195,"height":44.014442845393205,"seed":1325596383,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809961229,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"Uq487qTt78DHOKArOPqTe","focus":-0.12253844389034485,"gap":1.0974214788075187},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.3597347861842195,44.014442845393205]]},{"type":"arrow","version":863,"versionNonce":203960639,"isDeleted":false,"id":"k-drX4b5Tm5k2foswC8Jm","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":331.5736202281428,"y":-22571.180065170975,"strokeColor":"#000000","backgroundColor":"transparent","width":0.24285567434213817,"height":50.200837787830096,"seed":1440227985,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809961229,"link":null,"locked":false,"startBinding":{"elementId":"Uq487qTt78DHOKArOPqTe","focus":0.096196843802201,"gap":2.977915178267722},"endBinding":{"elementId":"em-frhxxp0ZdWPYbcWn2z","focus":-0.10448132730631594,"gap":1.9362800999660976},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0.24285567434213817,50.200837787830096]]},{"type":"arrow","version":600,"versionNonce":1318962737,"isDeleted":false,"id":"21qfct9As10dX5qSegqaI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":338.67736749268306,"y":-22349.04294728318,"strokeColor":"#000000","backgroundColor":"transparent","width":1.4168890430255878,"height":52.796964143452044,"seed":756927231,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809961229,"link":null,"locked":false,"startBinding":{"elementId":"em-frhxxp0ZdWPYbcWn2z","focus":0.08838438412637449,"gap":1},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.4168890430255878,52.796964143452044]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalling.excalidraw.md3");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

We could change the y position by y speed in big jumps, but it might turn out we will jump beyond the platform, so instead we will change y by 1 step y-speed times. 


```ad-scratch
title: 
~~~scratchblock

when I receive [fall v]
change [y speed v] by (-1)
change y  by 1 (y speed) times or until touching wall::custom
/: [At this point we may be touching a wall]::custom
/: [if so, we should pull out of the wall]::custom
/: [our speed +/- tells us whether we are either moving up (ceiling\) or down (floor\)]::custom
pull up or down if touching walls depending on whether we were <(y speed) \> [0]> or not::custom
broadcast [move left / right v]

~~~
```


To be continued...
