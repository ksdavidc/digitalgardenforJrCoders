---
{"dg-publish":true,"permalink":"/digital-garden/hatlight-platformer/"}
---


# Hatlight Platformer

As always, start by creating your **main sprite** and initializing your **variables**. 

- In this case, it is important that **your main sprite is just a square**. Later, we will make it have a real costume, but for now, just a square.
- Initialize usually means things like **position**, **direction**, and **effects**.
- You will also initialize all your **variables**. 
- At the start you don't always know all your variables, but as this is a platformer, we know we will need `x speed `and `y speed`, so let's initialize those.
- To set the **position**, use this trick: Put your sprite at the starting position in the stage. Then the `go to x` block amd scratch will put the correct numbers in the block.

This is what we get:

```ad-scratch
title: main sprite
~~~scratchblock

when @greenFlag clicked
broadcast [initialize v]


when I receive [initialize v]
set [ghost v] effect to (0)::looks
go to x: (-205) y: (65)
set [x speed v] to [0]
set [y speed v] to [0]
~~~
```

After we initialize, we move left right, then fall, then repeat. The flowchart for this is:

<style>
.container {font-family: sans-serif; text-align: center;}
.button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;}
.excalidraw .App-menu_top .buttonList { display: flex;}
.excalidraw-wrapper { height: 800px; margin: 50px; position: relative;}
:root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;}
</style><script src="https://unpkg.com/react@17/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/@excalidraw/excalidraw@0.12.0/dist/excalidraw.production.min.js"></script><div id="Hatlightoverall.excalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1544,"versionNonce":2145659295,"isDeleted":false,"id":"RMNqwfWlgfbMpYooeJoeX","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-327.7608418906913,"y":-1170.4777724331725,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":321,"height":80,"seed":1239531121,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bLuBw5Gk","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"}],"updated":1668809703478,"link":null,"locked":false},{"type":"text","version":1683,"versionNonce":2130969553,"isDeleted":false,"id":"bLuBw5Gk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-279.2608418906913,"y":-1156.9777724331725,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":224,"height":53,"seed":217341215,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809703478,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Green Flag","rawText":"Green Flag","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"RMNqwfWlgfbMpYooeJoeX","originalText":"Green Flag"},{"type":"rectangle","version":1646,"versionNonce":2083079455,"isDeleted":false,"id":"3KIpf-rkzikNMb_aR0m7y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-321.6489754778724,"y":-1023.7914363356381,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":312,"height":94,"seed":820168785,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ZCCwgZWZ","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"}],"updated":1668809837288,"link":null,"locked":false},{"type":"text","version":1779,"versionNonce":701522001,"isDeleted":false,"id":"ZCCwgZWZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-256.6489754778724,"y":-1003.2914363356381,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":182,"height":53,"seed":1506369855,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809837288,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Initialize","rawText":"Initialize","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"3KIpf-rkzikNMb_aR0m7y","originalText":"Initialize"},{"type":"rectangle","version":1675,"versionNonce":13486193,"isDeleted":false,"id":"g3GQAZzBP1tmYREzU3GFV","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-347.11676076280065,"y":-869.9225472838204,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":367,"height":74,"seed":182949425,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"y03U4cUU","type":"text"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"},{"id":"rOdClYNLCyfLF1jbUwU8F","type":"arrow"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"}],"updated":1668809838673,"link":null,"locked":false},{"type":"text","version":1815,"versionNonce":304476959,"isDeleted":false,"id":"y03U4cUU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-328.11676076280065,"y":-859.4225472838204,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":329,"height":53,"seed":698933599,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809838673,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Move Left right","rawText":"Move Left right","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"g3GQAZzBP1tmYREzU3GFV","originalText":"Move Left right"},{"type":"rectangle","version":1779,"versionNonce":2037407135,"isDeleted":false,"id":"sRV2I3u5YmLmW1mMZtcg3","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-291.5359897378928,"y":-733.9003708506589,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":262,"height":80,"seed":1255647249,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"XFDnTuBL","type":"text"},{"id":"rOdClYNLCyfLF1jbUwU8F","type":"arrow"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"}],"updated":1668809840817,"link":null,"locked":false},{"type":"text","version":1908,"versionNonce":1518669777,"isDeleted":false,"id":"XFDnTuBL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-198.5359897378928,"y":-720.4003708506589,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":76,"height":53,"seed":769875327,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809840817,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"sRV2I3u5YmLmW1mMZtcg3","originalText":"Fall"},{"type":"arrow","version":894,"versionNonce":1113730609,"isDeleted":false,"id":"CZZBlZLQcMsvBM3Y59OCy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-165.29332381157542,"y":-1088.9521301720024,"strokeColor":"#000000","backgroundColor":"transparent","width":6.08625699520789,"height":64.16069383636432,"seed":447380977,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809837288,"link":null,"locked":false,"startBinding":{"elementId":"RMNqwfWlgfbMpYooeJoeX","gap":1.5256422611701055,"focus":-0.03503457315906321},"endBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","gap":1,"focus":-0.06409054010653806},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-6.08625699520789,64.16069383636432]]},{"type":"arrow","version":1214,"versionNonce":811087679,"isDeleted":false,"id":"ZGWdRa8JACOlC9W9gZeZ8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-181.42538080991721,"y":-928.7636585578603,"strokeColor":"#000000","backgroundColor":"transparent","width":0.8571893124201324,"height":57.813333496261976,"seed":431576479,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809838674,"link":null,"locked":false,"startBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","gap":1.0277777777777781,"focus":0.09619319606044506},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","gap":1.0277777777777781,"focus":-0.10448132730631575},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.8571893124201324,57.813333496261976]]},{"type":"arrow","version":876,"versionNonce":1742007729,"isDeleted":false,"id":"rOdClYNLCyfLF1jbUwU8F","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-157.02964281074014,"y":-794.8947695060427,"strokeColor":"#000000","backgroundColor":"transparent","width":3.979893627919182,"height":52.74983854753407,"seed":2036832209,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809840817,"link":null,"locked":false,"startBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","gap":1.0277777777777146,"focus":-0.05087433664670646},"endBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","gap":8.244560107849793,"focus":-0.030693831789847976},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-3.979893627919182,52.74983854753407]]},{"type":"arrow","version":2284,"versionNonce":457876593,"isDeleted":false,"id":"SgfLADjg34eKJoEx705pv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-240.51243868748037,"y":-649.1913122269744,"strokeColor":"#000000","backgroundColor":"transparent","width":360.3711870488704,"height":228.07440111126095,"seed":1763690303,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809856858,"link":null,"locked":false,"startBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","focus":0.7435564056870121,"gap":4.709058623684427},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","focus":-0.7832206169105584,"gap":9.178032963755982},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[46.062120168511456,39.55391812835296],[288.38663423950425,8.30509812006028],[360.3711870488704,-143.65701118141624],[269.5737108884357,-188.520482982908]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Hatlightoverall.excalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

The hexagon means that left/right is the start of a loop. In this case the loop goes forever.

So, let's put in  left/right and fall stacks.

```ad-scratch
title: main sprite
~~~scratchblock
when @greenFlag clicked
   broadcast [initialize v]
   broadcast [move left / right v]


when I receive [move left / right v]
our left right routine will go here
broadcast [fall v]


when I receive [fall v]
our fall routine goes here
broadcast [move left / right v]

~~~
```

So let's do the left right routine. The basic routine is this:

<div id="HatlightmoveLeftRight.excalidraw.md2"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1425,"versionNonce":1329893503,"isDeleted":false,"id":"wcDy_w7SXSk9ohmQLvgLS","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-251.91063961401403,"y":-237.47329147741908,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":554,"height":96,"seed":998814719,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"QREgwiBu","type":"text"},{"id":"8mSenxo5ScdrK-QKmCdth","type":"arrow"}],"updated":1668807749003,"link":null,"locked":false},{"type":"text","version":1604,"versionNonce":2144777425,"isDeleted":false,"id":"QREgwiBu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-215.41063961401403,"y":-232.47329147741908,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":481,"height":86,"seed":629919601,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808516622,"link":"[[Digital Garden/scrap|scrap]]","locked":false,"fontSize":33.79879579338343,"fontFamily":1,"text":"Detect arrows and set the \nx-speed variable","rawText":"Detect arrows and set the x-speed variable","baseline":73,"textAlign":"center","verticalAlign":"middle","containerId":"wcDy_w7SXSk9ohmQLvgLS","originalText":"Detect arrows and set the x-speed variable"},{"type":"rectangle","version":1275,"versionNonce":1589267505,"isDeleted":false,"id":"NnmCu8ZA7uLUagOYccVAu","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-252.18183084057938,"y":-103.46953861270862,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":151,"seed":628087839,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"Adu5VhNU","type":"text"},{"id":"8mSenxo5ScdrK-QKmCdth","type":"arrow"},{"id":"m71vF6jSLhQz_6pkDWalX","type":"arrow"}],"updated":1668807763818,"link":null,"locked":false},{"type":"text","version":1395,"versionNonce":1583454463,"isDeleted":false,"id":"Adu5VhNU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-216.18183084057938,"y":-80.96953861270862,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":463,"height":106,"seed":253933905,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668808516625,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Keep x-speed below a \nmaximum speed","rawText":"Keep x-speed below a maximum speed","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"NnmCu8ZA7uLUagOYccVAu","originalText":"Keep x-speed below a maximum speed"},{"type":"rectangle","version":1351,"versionNonce":1004041919,"isDeleted":false,"id":"Q5UEJ4Rxw0rzNOBRFvbZY","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-248.0279511322846,"y":81.86231029613606,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":100,"seed":825541873,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bYdWrPcc","type":"text"},{"id":"m71vF6jSLhQz_6pkDWalX","type":"arrow"},{"id":"dqb1Nxa_P-lBcXJnfPGen","type":"arrow"}],"updated":1668807781074,"link":null,"locked":false},{"type":"text","version":1472,"versionNonce":2097443999,"isDeleted":false,"id":"bYdWrPcc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-189.0279511322846,"y":105.36231029613606,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":417,"height":53,"seed":1025179295,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668807765684,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"change x by x-speed","rawText":"change x by x-speed","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"Q5UEJ4Rxw0rzNOBRFvbZY","originalText":"change x by x-speed"},{"type":"rectangle","version":1437,"versionNonce":1949910751,"isDeleted":false,"id":"I2eU_tRX6JKN6bwsBvAmS","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-240.2663287188555,"y":229.67138176995365,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":74,"seed":15431025,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"M2QHvzLB","type":"text"},{"id":"dqb1Nxa_P-lBcXJnfPGen","type":"arrow"}],"updated":1668807781074,"link":null,"locked":false},{"type":"text","version":1562,"versionNonce":402889567,"isDeleted":false,"id":"M2QHvzLB","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-10.766328718855505,"y":240.17138176995365,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":76,"height":53,"seed":1841665567,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668807776334,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"I2eU_tRX6JKN6bwsBvAmS","originalText":"Fall"},{"type":"arrow","version":543,"versionNonce":497676977,"isDeleted":false,"id":"8mSenxo5ScdrK-QKmCdth","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-24.82286662352641,"y":-140.47329147741908,"strokeColor":"#000000","backgroundColor":"transparent","width":2.9181612085048414,"height":34.506145877228946,"seed":1976403985,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808516623,"link":null,"locked":false,"startBinding":{"elementId":"wcDy_w7SXSk9ohmQLvgLS","gap":1,"focus":0.16284224009919607},"endBinding":{"elementId":"NnmCu8ZA7uLUagOYccVAu","gap":2.4976069874814897,"focus":-0.18130019673081207},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2.9181612085048414,34.506145877228946]]},{"type":"arrow","version":244,"versionNonce":635707679,"isDeleted":false,"id":"m71vF6jSLhQz_6pkDWalX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-15.589505057040913,"y":51.854662833339546,"strokeColor":"#000000","backgroundColor":"transparent","width":2.355311819704294,"height":27.501751136782886,"seed":1640182481,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808516626,"link":null,"locked":false,"startBinding":{"elementId":"NnmCu8ZA7uLUagOYccVAu","gap":4.324201446048164,"focus":0.13776891935694174},"endBinding":{"elementId":"Q5UEJ4Rxw0rzNOBRFvbZY","gap":2.5058963260136267,"focus":-0.10379461253620226},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2.355311819704294,27.501751136782886]]},{"type":"arrow","version":82,"versionNonce":1417127263,"isDeleted":false,"id":"dqb1Nxa_P-lBcXJnfPGen","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":5.522106933593818,"y":183.00553506387251,"strokeColor":"#000000","backgroundColor":"transparent","width":0.35595308338937315,"height":45.66584670608114,"seed":270372369,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668808516629,"link":null,"locked":false,"startBinding":{"elementId":"Q5UEJ4Rxw0rzNOBRFvbZY","gap":1.1432247677364558,"focus":0.05058534276254917},"endBinding":{"elementId":"I2eU_tRX6JKN6bwsBvAmS","gap":1,"focus":-0.08351264228812778},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.35595308338937315,45.66584670608114]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"center","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightmoveLeftRight.excalidraw.md2");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

And here is the code

```ad-scratch
title: main sprite
~~~scratchblock
when I receive [move left / right v]
set xspeed::custom
keep speed below max::custom
change x by (x speed)
broadcast [fall v]
~~~
```



Changing the speed is now easy. If no key is being held, then slow the speed down. Otherwise, speed  up in the direction we are going.

```ad-scratch
title: 
~~~scratchblock

define set xspeed
if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
   no key is being pressed so we decrease speed
   if moving left, go a little less left, if going right, go a little less right.
   if moving left, make xspeed bigger, if going right, make xspeed smaller
   moving left +1 right -1
   moving left means speed IS LESS THAN 0,  right means speed IS MORE THAN 0
   change [x speed v] by (<(x speed) \< [0]> - <(x speed) \> [0]>)
else
    /: [else go in direction of arrow]::custom
    change [x speed v] by (<key [right arrow v] pressed?> - <key [left arrow v] pressed?>)
end


~~~
```

Keeping the speed below the max is easy, but we have to remember that left and right are different.
```ad-scratch
title: 
~~~scratchblock


define keep speed below max
/: [set maximum speed]::custom
moving right:
if <(x speed) \> [4]> then
    set [x speed v] to [4]
end
moving left:
if <(x speed) \< [-4]> then
    set [x speed v] to [-4]
end
~~~
```

# Falling

Next we will teach our guy to fall. First, we need a platform or wall for the character to fall onto. So make one. 

Our basic fall routine is 

<div id="HatlightFalling.excalidraw.md3"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1476,"versionNonce":1444709873,"isDeleted":false,"id":"STdU6Qrgl8NloQz5qXm4Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":85.44781784784311,"y":-22858.890001569485,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":151,"seed":474785375,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"etcObaWE","type":"text"}],"updated":1668809240465,"link":null,"locked":false},{"type":"text","version":1595,"versionNonce":206294431,"isDeleted":false,"id":"etcObaWE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":109.94781784784311,"y":-22836.390001569485,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":486,"height":105,"seed":419345169,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809240465,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y speed by\ngravity","rawText":"Change the y speed by gravity","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"STdU6Qrgl8NloQz5qXm4Y","originalText":"Change the y speed by gravity"},{"type":"rectangle","version":1539,"versionNonce":156803025,"isDeleted":false,"id":"Uq487qTt78DHOKArOPqTe","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":87.97987736675748,"y":-22663.06751268431,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":29786751,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ou3N2S3J","type":"text"},{"id":"pl20Yi0maQgIh05RTWlDZ","type":"arrow"},{"id":"k-drX4b5Tm5k2foswC8Jm","type":"arrow"}],"updated":1668809240465,"link":null,"locked":false},{"type":"text","version":1660,"versionNonce":1306444223,"isDeleted":false,"id":"ou3N2S3J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":92.97987736675748,"y":-22631.56751268431,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":525,"height":105,"seed":1169697009,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809240465,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Change the y position by\nthe y speed","rawText":"Change the y position by the y speed","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"Uq487qTt78DHOKArOPqTe","originalText":"Change the y position by the y speed"},{"type":"rectangle","version":1597,"versionNonce":2052956049,"isDeleted":false,"id":"em-frhxxp0ZdWPYbcWn2z","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":91.28356046365991,"y":-22438.952479618245,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":804248223,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"gMC1xeGx","type":"text"},{"id":"k-drX4b5Tm5k2foswC8Jm","type":"arrow"},{"id":"21qfct9As10dX5qSegqaI","type":"arrow"}],"updated":1668809240465,"link":null,"locked":false},{"type":"text","version":1726,"versionNonce":461020671,"isDeleted":false,"id":"gMC1xeGx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":157.7835604636599,"y":-22407.452479618245,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":402,"height":105,"seed":1804067537,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809240465,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"If inside a wall or\nplatform, pull out","rawText":"If inside a wall or platform, pull out","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"em-frhxxp0ZdWPYbcWn2z","originalText":"If inside a wall or platform, pull out"},{"type":"rectangle","version":1648,"versionNonce":1383444305,"isDeleted":false,"id":"i2P1R4q4JoJ1ry3s2Xq4i","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":94.34586557947694,"y":-22218.57452958569,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":535,"height":169,"seed":1534668479,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"gXVWwZ3X","type":"text"}],"updated":1668809240465,"link":null,"locked":false},{"type":"text","version":1781,"versionNonce":2088528447,"isDeleted":false,"id":"gXVWwZ3X","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.84586557947694,"y":-22187.07452958569,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":374,"height":105,"seed":386228401,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809240465,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Go back to move\nleft/right","rawText":"Go back to move left/right","baseline":90,"textAlign":"center","verticalAlign":"middle","containerId":"i2P1R4q4JoJ1ry3s2Xq4i","originalText":"Go back to move left/right"},{"type":"arrow","version":563,"versionNonce":1680352895,"isDeleted":false,"id":"pl20Yi0maQgIh05RTWlDZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":318.3768735804364,"y":-22708.17937700851,"strokeColor":"#000000","backgroundColor":"transparent","width":1.3597347861842057,"height":44.014442845394726,"seed":1325596383,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809240473,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"Uq487qTt78DHOKArOPqTe","focus":-0.12253844389034485,"gap":1.0974214788075187},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.3597347861842057,44.014442845394726]]},{"type":"arrow","version":761,"versionNonce":511508127,"isDeleted":false,"id":"k-drX4b5Tm5k2foswC8Jm","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":330.1310882185942,"y":-22491.08959750604,"strokeColor":"#000000","backgroundColor":"transparent","width":0.24285567434214173,"height":50.20083778782896,"seed":1440227985,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809240473,"link":null,"locked":false,"startBinding":{"elementId":"Uq487qTt78DHOKArOPqTe","focus":0.096196843802201,"gap":2.977915178267722},"endBinding":{"elementId":"em-frhxxp0ZdWPYbcWn2z","focus":-0.10448132730631594,"gap":1.9362800999660976},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0.24285567434214173,50.20083778782896]]},{"type":"arrow","version":534,"versionNonce":1389297361,"isDeleted":false,"id":"21qfct9As10dX5qSegqaI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":337.2348354831345,"y":-22268.952479618245,"strokeColor":"#000000","backgroundColor":"transparent","width":1.4168890430255878,"height":52.796964143452044,"seed":756927231,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668809240473,"link":null,"locked":false,"startBinding":{"elementId":"em-frhxxp0ZdWPYbcWn2z","focus":0.08838438412637449,"gap":1},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.4168890430255878,52.796964143452044]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalling.excalidraw.md3");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

We could change the y position by y speed in big jumps, but it might turn out we will jump beyond the platform, so instead we will change y by 1 step y-speed times. 


```ad-scratch
title: 
~~~scratchblock

when I receive [fall v]
change [y speed v] by (-1)
change y  by 1 (y speed) times or until touching wall::custom
/: [At this point we may be touching a wall]::custom
/: [if so, we should pull out of the wall]::custom
/: [our speed +/- tells us whether we are either moving up (ceiling\) or down (floor\)]::custom
pull up or down if touching walls depending on whether we were <(y speed) \> [0]> or not::custom
broadcast [move left / right v]

~~~
```


To be continued...
