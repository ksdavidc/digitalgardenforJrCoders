---
{"dg-publish":true,"permalink":"/digital-garden/hatlight-platformer/"}
---


# Hatlight Platformer

As always, start by creating your **main sprite** and initializing your **variables**. 

- In this case, it is important that **your main sprite is just a square**. Later, we will make it have a real costume, but for now, just a square.
- Initialize usually means things like **position**, **direction**, and **effects**.
- You will also initialize all your **variables**. 
- At the start you don't always know all your variables, but as this is a platformer, we know we will need `x speed `and `y speed`, so let's initialize those.
- To set the **position**, use this trick: Put your sprite at the starting position in the stage. Then the `go to x` block amd scratch will put the correct numbers in the block.

This is what we get:

```ad-scratch
title: main sprite
~~~scratchblock

when @greenFlag clicked
broadcast [initialize v]


when I receive [initialize v]
set [ghost v] effect to (0)::looks
go to x: (-205) y: (65)
set [x speed v] to [0]
set [y speed v] to [0]
~~~
```

After we initialize, we move left right, then fall, then repeat. The flowchart for this is:

<style>
.container {font-family: sans-serif; text-align: center;}
.button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;}
.excalidraw .App-menu_top .buttonList { display: flex;}
.excalidraw-wrapper { height: 800px; margin: 50px; position: relative;}
:root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;}
</style><script src="https://unpkg.com/react@17/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/@excalidraw/excalidraw@0.12.0/dist/excalidraw.production.min.js"></script><div id="Hatlightoverall.excalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1544,"versionNonce":2145659295,"isDeleted":false,"id":"RMNqwfWlgfbMpYooeJoeX","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-327.7608418906913,"y":-1170.4777724331725,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":321,"height":80,"seed":1239531121,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bLuBw5Gk","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"}],"updated":1668809703478,"link":null,"locked":false},{"type":"text","version":1683,"versionNonce":2130969553,"isDeleted":false,"id":"bLuBw5Gk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-279.2608418906913,"y":-1156.9777724331725,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":224,"height":53,"seed":217341215,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809703478,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Green Flag","rawText":"Green Flag","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"RMNqwfWlgfbMpYooeJoeX","originalText":"Green Flag"},{"type":"rectangle","version":1646,"versionNonce":2083079455,"isDeleted":false,"id":"3KIpf-rkzikNMb_aR0m7y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-321.6489754778724,"y":-1023.7914363356381,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":312,"height":94,"seed":820168785,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ZCCwgZWZ","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"}],"updated":1668809837288,"link":null,"locked":false},{"type":"text","version":1779,"versionNonce":701522001,"isDeleted":false,"id":"ZCCwgZWZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-256.6489754778724,"y":-1003.2914363356381,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":182,"height":53,"seed":1506369855,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809837288,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Initialize","rawText":"Initialize","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"3KIpf-rkzikNMb_aR0m7y","originalText":"Initialize"},{"type":"rectangle","version":1676,"versionNonce":822161329,"isDeleted":false,"id":"g3GQAZzBP1tmYREzU3GFV","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-347.11676076280065,"y":-869.9225472838204,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":367,"height":74,"seed":182949425,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"y03U4cUU","type":"text"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"}],"updated":1668810364433,"link":null,"locked":false},{"type":"text","version":1815,"versionNonce":304476959,"isDeleted":false,"id":"y03U4cUU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-328.11676076280065,"y":-859.4225472838204,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":329,"height":53,"seed":698933599,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809838673,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Move Left right","rawText":"Move Left right","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"g3GQAZzBP1tmYREzU3GFV","originalText":"Move Left right"},{"type":"rectangle","version":1780,"versionNonce":1051697119,"isDeleted":false,"id":"sRV2I3u5YmLmW1mMZtcg3","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-291.5359897378928,"y":-733.9003708506589,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":262,"height":80,"seed":1255647249,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"XFDnTuBL","type":"text"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"}],"updated":1668810364433,"link":null,"locked":false},{"type":"text","version":1908,"versionNonce":1518669777,"isDeleted":false,"id":"XFDnTuBL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-198.5359897378928,"y":-720.4003708506589,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":76,"height":53,"seed":769875327,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668809840817,"link":null,"locked":false,"fontSize":41.92573330673702,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":37,"textAlign":"center","verticalAlign":"middle","containerId":"sRV2I3u5YmLmW1mMZtcg3","originalText":"Fall"},{"type":"arrow","version":916,"versionNonce":1413867807,"isDeleted":false,"id":"CZZBlZLQcMsvBM3Y59OCy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-165.2810010323357,"y":-1089.1915136451184,"strokeColor":"#e67700","backgroundColor":"transparent","width":6.0231370570150204,"height":64.16069383636432,"seed":447380977,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810393811,"link":null,"locked":false,"startBinding":{"elementId":"RMNqwfWlgfbMpYooeJoeX","focus":-0.03564957328353111,"gap":1.286258788054056},"endBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","focus":-0.06348442400404053,"gap":1.2393834731160496},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-6.0231370570150204,64.16069383636432]]},{"type":"arrow","version":1245,"versionNonce":1782578257,"isDeleted":false,"id":"ZGWdRa8JACOlC9W9gZeZ8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-181.67024870776785,"y":-929.0030420309763,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.8537532265168295,"height":57.813333496261976,"seed":431576479,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810393811,"link":null,"locked":false,"startBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","focus":0.09774181347325406,"gap":1},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","focus":-0.10580130154277227,"gap":1.2671612508938779},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.8537532265168295,57.813333496261976]]},{"type":"arrow","version":883,"versionNonce":1460235583,"isDeleted":false,"id":"rOdClYNLCyfLF1jbUwU8F","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-157.01464784062955,"y":-794.8947695060427,"strokeColor":"#e67700","backgroundColor":"transparent","width":3.9878219515519504,"height":52.74983854753407,"seed":2036832209,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810393811,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-3.9878219515519504,52.74983854753407]]},{"type":"arrow","version":2313,"versionNonce":356861119,"isDeleted":false,"id":"SgfLADjg34eKJoEx705pv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-240.75184011211286,"y":-649.4306957000905,"strokeColor":"#e67700","backgroundColor":"transparent","width":360.3711870488705,"height":228.07440111126095,"seed":1763690303,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810381129,"link":null,"locked":false,"startBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","focus":0.743334703623299,"gap":4.469675150568378},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","focus":-0.7841691227811763,"gap":8.938631539123605},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[46.06212016851157,39.55391812835296],[288.38663423950436,8.30509812006028],[360.3711870488705,-143.65701118141624],[269.5737108884358,-188.520482982908]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#e67700","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Hatlightoverall.excalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

The hexagon means that left/right is the start of a loop. In this case the loop goes forever.

So, let's put in  left/right and fall stacks.

```ad-scratch
title: main sprite
~~~scratchblock
when @greenFlag clicked
   broadcast [initialize v]
   broadcast [move left / right v]


when I receive [move left / right v]
our left right routine will go here
broadcast [fall v]


when I receive [fall v]
our fall routine goes here
broadcast [move left / right v]

~~~
```

So let's do the left right routine. The basic routine is this:

<div id="HatlightmoveLeftRight.excalidraw.md2"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1631,"versionNonce":585388383,"isDeleted":false,"id":"j46Q-mIB_RMtLqBuMi9Jo","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-383.8279541127483,"y":-329.68106953418226,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":355,"height":97,"seed":216207345,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"hoKKMoqj","type":"text"},{"id":"gKKjxwppjVZFkGfKIubPj","type":"arrow"}],"updated":1668810167072,"link":null,"locked":false},{"type":"text","version":1774,"versionNonce":194013567,"isDeleted":false,"id":"hoKKMoqj","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-348.8279541127483,"y":-306.18106953418226,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":285,"height":50,"seed":1921704863,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810402897,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Detect arrows and set the \nx-speed variable","rawText":"Detect arrows and set the x-speed variable","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"j46Q-mIB_RMtLqBuMi9Jo","originalText":"Detect arrows and set the x-speed variable"},{"type":"rectangle","version":1739,"versionNonce":91947775,"isDeleted":false,"id":"IoJwQQFPcnide1ayTmbpU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-336.3082220634403,"y":-188.45314336311844,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":297,"height":81,"seed":2059266513,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"KNDBm7n1","type":"text"},{"id":"gKKjxwppjVZFkGfKIubPj","type":"arrow"},{"id":"s9wFQwYotNcTV8FUmMlr4","type":"arrow"}],"updated":1668810407641,"link":null,"locked":false},{"type":"text","version":1875,"versionNonce":1304635825,"isDeleted":false,"id":"KNDBm7n1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-298.8082220634403,"y":-172.95314336311844,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":222,"height":50,"seed":130750399,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810402903,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Keep x-speed below a \nmaximum speed","rawText":"Keep x-speed below a maximum speed","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"IoJwQQFPcnide1ayTmbpU","originalText":"Keep x-speed below a maximum speed"},{"type":"rectangle","version":1810,"versionNonce":977292063,"isDeleted":false,"id":"ABGizyKxq-GGhHL1bSIUj","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-310.5726812913834,"y":-58.324972180479676,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":253,"height":47,"seed":2145552305,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"llvdtr75","type":"text"},{"id":"dKCsiULa4aCptAMA4JZvi","type":"arrow"},{"id":"s9wFQwYotNcTV8FUmMlr4","type":"arrow"}],"updated":1668810407641,"link":null,"locked":false},{"type":"text","version":1949,"versionNonce":999268639,"isDeleted":false,"id":"llvdtr75","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-284.0726812913834,"y":-47.324972180479676,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":200,"height":25,"seed":1261422559,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810170269,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"change x by x-speed","rawText":"change x by x-speed","baseline":18,"textAlign":"center","verticalAlign":"middle","containerId":"ABGizyKxq-GGhHL1bSIUj","originalText":"change x by x-speed"},{"type":"rectangle","version":1890,"versionNonce":1979001073,"isDeleted":false,"id":"ZLp42ksZ46S107PNBhQAh","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-243.4970515808136,"y":36.95129959198954,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":130,"height":42,"seed":376990097,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"7coyg3pg","type":"text"},{"id":"dKCsiULa4aCptAMA4JZvi","type":"arrow"}],"updated":1668810175907,"link":null,"locked":false},{"type":"text","version":2020,"versionNonce":1845680799,"isDeleted":false,"id":"7coyg3pg","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-197.4970515808136,"y":45.45129959198954,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":38,"height":25,"seed":2060022783,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810175907,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Fall","rawText":"Fall","baseline":18,"textAlign":"center","verticalAlign":"middle","containerId":"ZLp42ksZ46S107PNBhQAh","originalText":"Fall"},{"type":"arrow","version":1305,"versionNonce":325553983,"isDeleted":false,"id":"gKKjxwppjVZFkGfKIubPj","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-199.1635772775495,"y":-231.66856953418227,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.8489200579872431,"height":42.20292617106384,"seed":129437553,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810411692,"link":null,"locked":false,"startBinding":{"elementId":"j46Q-mIB_RMtLqBuMi9Jo","focus":-0.03456172009931226,"gap":1.0124999999999886},"endBinding":{"elementId":"IoJwQQFPcnide1ayTmbpU","focus":-0.06477195746911538,"gap":1.0124999999999886},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0.8489200579872431,42.20292617106384]]},{"type":"arrow","version":1751,"versionNonce":1678460977,"isDeleted":false,"id":"s9wFQwYotNcTV8FUmMlr4","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-200.57346588606364,"y":-106.3601201073045,"strokeColor":"#e67700","backgroundColor":"transparent","width":2.0188674963216897,"height":46.94212467101086,"seed":1050188831,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810411692,"link":null,"locked":false,"startBinding":{"elementId":"IoJwQQFPcnide1ayTmbpU","focus":0.09687090192422648,"gap":1.0930232558139465},"endBinding":{"elementId":"ABGizyKxq-GGhHL1bSIUj","focus":-0.10527926522677378,"gap":1.0930232558139608},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2.0188674963216897,46.94212467101086]]},{"type":"arrow","version":1448,"versionNonce":726749023,"isDeleted":false,"id":"dKCsiULa4aCptAMA4JZvi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-178.36985407466236,"y":-10.300581936577233,"strokeColor":"#e67700","backgroundColor":"transparent","width":1.4282558476636211,"height":45.498135660797885,"seed":166066513,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810411692,"link":null,"locked":false,"startBinding":{"elementId":"ABGizyKxq-GGhHL1bSIUj","gap":1.024390243902439,"focus":-0.050870156959174996},"endBinding":{"elementId":"ZLp42ksZ46S107PNBhQAh","gap":1.753745867768886,"focus":-0.03069383178984813},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.4282558476636211,45.498135660797885]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#e67700","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"center","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightmoveLeftRight.excalidraw.md2");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

And here is the code

```ad-scratch
title: main sprite
~~~scratchblock
when I receive [move left / right v]
set xspeed::custom
keep speed below max::custom
change x by (x speed)
broadcast [fall v]
~~~
```



Changing the speed is now easy. If no key is being held, then slow the speed down. Otherwise, speed  up in the direction we are going.

```ad-scratch
title: 
~~~scratchblock

define set xspeed
if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
   no key is being pressed so we decrease speed
   if moving left, go a little less left, if going right, go a little less right.
   if moving left, make xspeed bigger, if going right, make xspeed smaller
   moving left +1 right -1
   moving left means speed IS LESS THAN 0,  right means speed IS MORE THAN 0
   change [x speed v] by (<(x speed) \< [0]> - <(x speed) \> [0]>)
else
    /: [else go in direction of arrow]::custom
    change [x speed v] by (<key [right arrow v] pressed?> - <key [left arrow v] pressed?>)
end


~~~
```

Keeping the speed below the max is easy, but we have to remember that left and right are different.
```ad-scratch
title: 
~~~scratchblock


define keep speed below max
/: [set maximum speed]::custom
moving right:
if <(x speed) \> [4]> then
    set [x speed v] to [4]
end
moving left:
if <(x speed) \< [-4]> then
    set [x speed v] to [-4]
end
~~~
```

# Falling

Next we will teach our guy to fall. First, we need a platform or wall for the character to fall onto. So make one. 

Our basic fall routine is 

<div id="HatlightFalling.excalidraw.md3"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1570,"versionNonce":686958097,"isDeleted":false,"id":"Nwu0LtqoSmT45PmOhGbI0","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-48.8427089061953,"y":-23063.87092439746,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":301,"height":74,"seed":1762656049,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"71yE5y0v","type":"text"},{"id":"jhNFrphANp3u00ECumDDS","type":"arrow"}],"updated":1668810294919,"link":null,"locked":false},{"type":"text","version":1693,"versionNonce":1074376689,"isDeleted":false,"id":"71yE5y0v","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-14.842708906195298,"y":-23051.87092439746,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":233,"height":50,"seed":1868007519,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810419373,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Change the y speed by \ngravity","rawText":"Change the y speed by gravity","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"Nwu0LtqoSmT45PmOhGbI0","originalText":"Change the y speed by gravity"},{"type":"rectangle","version":1733,"versionNonce":1836175537,"isDeleted":false,"id":"1P7VB9ARxlKRJr1lHPf5q","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-47.79810268211793,"y":-22932.871115114867,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":344,"height":82,"seed":2047537425,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"oCoGhJVT","type":"text"},{"id":"jhNFrphANp3u00ECumDDS","type":"arrow"},{"id":"KUXSVk7kjG8YUUAb-OWLF","type":"arrow"}],"updated":1668810328764,"link":null,"locked":false},{"type":"text","version":1831,"versionNonce":367732703,"isDeleted":false,"id":"oCoGhJVT","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-31.79810268211793,"y":-22916.871115114867,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":312,"height":50,"seed":891626623,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810419396,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Change the y position by the y \nspeed","rawText":"Change the y position by the y speed","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"1P7VB9ARxlKRJr1lHPf5q","originalText":"Change the y position by the y speed"},{"type":"rectangle","version":1758,"versionNonce":962483167,"isDeleted":false,"id":"dG_sTAK3ANmmsONJBhqjK","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-41.624599612389375,"y":-22767.773495644247,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":346,"height":94,"seed":1988929265,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"QObjDLxV","type":"text"},{"id":"KUXSVk7kjG8YUUAb-OWLF","type":"arrow"},{"id":"d5gJhw0lYPrHBm7mtrV9n","type":"arrow"}],"updated":1668810330984,"link":null,"locked":false},{"type":"text","version":1892,"versionNonce":1357420881,"isDeleted":false,"id":"QObjDLxV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-34.124599612389375,"y":-22745.773495644247,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":331,"height":50,"seed":53099679,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810419402,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"If inside a wall or platform, pull \nout","rawText":"If inside a wall or platform, pull out","baseline":43,"textAlign":"center","verticalAlign":"middle","containerId":"dG_sTAK3ANmmsONJBhqjK","originalText":"If inside a wall or platform, pull out"},{"type":"rectangle","version":1871,"versionNonce":365449521,"isDeleted":false,"id":"u9b9U3IXBOQMFf2--IXVE","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-41.622756453094155,"y":-22591.963575927595,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":351,"height":70,"seed":1226612945,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"Ar1U8pJf","type":"text"},{"id":"d5gJhw0lYPrHBm7mtrV9n","type":"arrow"}],"updated":1668810332750,"link":null,"locked":false},{"type":"text","version":2006,"versionNonce":1183143519,"isDeleted":false,"id":"Ar1U8pJf","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-1.622756453094155,"y":-22569.463575927595,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":271,"height":25,"seed":1561809087,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668810332750,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Go back to move left/right","rawText":"Go back to move left/right","baseline":18,"textAlign":"center","verticalAlign":"middle","containerId":"u9b9U3IXBOQMFf2--IXVE","originalText":"Go back to move left/right"},{"type":"arrow","version":1063,"versionNonce":1244662239,"isDeleted":false,"id":"jhNFrphANp3u00ECumDDS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":100.17053370426866,"y":-22988.443616080705,"strokeColor":"#e67700","backgroundColor":"transparent","width":1.4522417996169708,"height":51.11403666596743,"seed":525491889,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810425420,"link":null,"locked":false,"startBinding":{"elementId":"Nwu0LtqoSmT45PmOhGbI0","focus":0.017014354057338,"gap":1.4273083167536242},"endBinding":{"elementId":"1P7VB9ARxlKRJr1lHPf5q","focus":-0.12293234366194902,"gap":4.458464299870684},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.4522417996169708,51.11403666596743]]},{"type":"arrow","version":1567,"versionNonce":940918673,"isDeleted":false,"id":"KUXSVk7kjG8YUUAb-OWLF","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":109.3652549709048,"y":-22849.54782477238,"strokeColor":"#e67700","backgroundColor":"transparent","width":2.861525211783544,"height":80.7743291281331,"seed":2089607391,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810425421,"link":null,"locked":false,"startBinding":{"elementId":"1P7VB9ARxlKRJr1lHPf5q","focus":0.09418138693452432,"gap":1.323290342486871},"endBinding":{"elementId":"dG_sTAK3ANmmsONJBhqjK","focus":-0.09989500464401446,"gap":1},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2.861525211783544,80.7743291281331]]},{"type":"arrow","version":1108,"versionNonce":1953592831,"isDeleted":false,"id":"d5gJhw0lYPrHBm7mtrV9n","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":128.6842236011788,"y":-22672.76395077131,"strokeColor":"#e67700","backgroundColor":"transparent","width":1.2171789706158904,"height":78.28245834465997,"seed":131424401,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668810425421,"link":null,"locked":false,"startBinding":{"elementId":"dG_sTAK3ANmmsONJBhqjK","focus":0.019787257680347455,"gap":1.0095448729371128},"endBinding":{"elementId":"u9b9U3IXBOQMFf2--IXVE","focus":-0.019270681258387757,"gap":2.5179164990549907},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.2171789706158904,78.28245834465997]]}],"appState":{"theme":"light","viewBackgroundColor":"transparent","currentItemStrokeColor":"#e67700","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalling.excalidraw.md3");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

We could change the y position by y speed in big jumps, but it might turn out we will jump beyond the platform, so instead we will change y by 1 step y-speed times. 


```ad-scratch
title: 
~~~scratchblock

when I receive [fall v]
change [y speed v] by (-1)
change y  by 1 (y speed) times or until touching wall::custom
/: [At this point we may be touching a wall]::custom
/: [if so, we should pull out of the wall]::custom
/: [our speed +/- tells us whether we are either moving up (ceiling\) or down (floor\)]::custom
pull up or down if touching walls depending on whether we were <(y speed) \> [0]> or not::custom
broadcast [move left / right v]

~~~
```


To be continued...
