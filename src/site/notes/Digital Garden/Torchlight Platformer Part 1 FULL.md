---
{"dg-publish":true,"permalink":"/digital-garden/torchlight-platformer-part-1-full/"}
---

 
# Torchlight Platformer Step 1

As always, start by creating your main sprite, which I am calling **hitbox**[^1] and initializing hitbox and your project's variables. 
* In this case, it is important that **hitbox is just a square**. Later, we will make it have a real costume, but for now, just a square.

<style>
.container {font-family: sans-serif; text-align: center;}
.button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;}
.excalidraw .App-menu_top .buttonList { display: flex;}
.excalidraw-wrapper { height: 800px; margin: 50px; position: relative;}
:root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;}
</style><script src="https://unpkg.com/react@17/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://unpkg.com/@excalidraw/excalidraw@0.12.0/dist/excalidraw.production.min.js"></script><div id="HatlightMainspriteexcalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":89,"versionNonce":2123033571,"isDeleted":false,"id":"KRN322rUgILzyqnIiAh0-","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-588.4230346679688,"y":-174.70481872558594,"strokeColor":"#000000","backgroundColor":"#15aabf","width":580.8837890625,"height":330.75030517578125,"seed":1997566463,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669338857461,"link":null,"locked":false},{"type":"rectangle","version":108,"versionNonce":1067289485,"isDeleted":false,"id":"hQZ7dFkbQxz1MSzeq2DS2","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-531.61865234375,"y":48.407012939453125,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1431296543,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669338862018,"link":null,"locked":false}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"#15aabf","currentItemFillStyle":"solid","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightMainspriteexcalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


- Initialize usually means things like **position**, **direction**, and **effects**. You will also initialize all your **variables**. 
- At the start you don't always know all your variables, but as this is a platformer, we know we will need `x speed `and `y speed`, so let's initialize those.
- To set the **position**, use this trick: Put your sprite at the starting position in the stage. Then find the `go to x` block in the block area, and scratch will put the correct numbers in the block.
- 
prescription are only valid for 4 days in japan.

This is what we get:

```ad-scratch
title: main sprite
~~~scratchblock

when @greenFlag clicked
broadcast [initialize v]


when I receive [initialize v]
set [ghost v] effect to (0)::looks
go to x: (-205) y: (65)
set [x speed v] to [0]
set [y speed v] to [0]
~~~
```

After we initialize, we 
- move left right, 
- then fall, 
- then repeat.

The flowchart for this is:

<div id="HatlightOverallexcalidraw.md2"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1613,"versionNonce":1531498787,"isDeleted":false,"id":"RMNqwfWlgfbMpYooeJoeX","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-327.07861963655523,"y":-1171.2797250196272,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":145,"height":48,"seed":1239531121,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bLuBw5Gk","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"}],"updated":1669340477775,"link":null,"locked":false},{"type":"text","version":1757,"versionNonce":2000848525,"isDeleted":false,"id":"bLuBw5Gk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-314.07861963655523,"y":-1159.2797250196272,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":119,"height":24,"seed":217341215,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669340477776,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Green Flag","rawText":"Green Flag","baseline":20,"textAlign":"center","verticalAlign":"middle","containerId":"RMNqwfWlgfbMpYooeJoeX","originalText":"Green Flag"},{"type":"rectangle","version":1785,"versionNonce":668755833,"isDeleted":false,"id":"3KIpf-rkzikNMb_aR0m7y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-327.87772088228417,"y":-1083.5863582106383,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":152,"height":34,"seed":820168785,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ZCCwgZWZ","type":"text"},{"id":"CZZBlZLQcMsvBM3Y59OCy","type":"arrow"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"}],"updated":1668911234444,"link":null,"locked":false},{"type":"text","version":1924,"versionNonce":538618007,"isDeleted":false,"id":"ZCCwgZWZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-311.37772088228417,"y":-1078.5863582106383,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":119,"height":24,"seed":1506369855,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668911234444,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Initialize","rawText":"Initialize","baseline":20,"textAlign":"center","verticalAlign":"middle","containerId":"3KIpf-rkzikNMb_aR0m7y","originalText":"Initialize"},{"type":"rectangle","version":1771,"versionNonce":45289561,"isDeleted":false,"id":"g3GQAZzBP1tmYREzU3GFV","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-351.870717277047,"y":-1009.0037078852681,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":206,"height":34,"seed":182949425,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"y03U4cUU","type":"text"},{"id":"ZGWdRa8JACOlC9W9gZeZ8","type":"arrow"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"},{"id":"rOdClYNLCyfLF1jbUwU8F","type":"arrow"}],"updated":1668911234444,"link":null,"locked":false},{"type":"text","version":1915,"versionNonce":34045367,"isDeleted":false,"id":"y03U4cUU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-337.870717277047,"y":-1004.0037078852681,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":178,"height":24,"seed":698933599,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668911234444,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Move Left right","rawText":"Move Left right","baseline":20,"textAlign":"center","verticalAlign":"middle","containerId":"g3GQAZzBP1tmYREzU3GFV","originalText":"Move Left right"},{"type":"rectangle","version":1996,"versionNonce":1516184547,"isDeleted":false,"id":"sRV2I3u5YmLmW1mMZtcg3","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-302.20735670997453,"y":-913.0437352520836,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":92,"height":34,"seed":1255647249,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"XFDnTuBL","type":"text"},{"id":"SgfLADjg34eKJoEx705pv","type":"arrow"},{"id":"rOdClYNLCyfLF1jbUwU8F","type":"arrow"}],"updated":1669340484981,"link":null,"locked":false},{"type":"text","version":2129,"versionNonce":1501544397,"isDeleted":false,"id":"XFDnTuBL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-280.70735670997453,"y":-908.0437352520836,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":49,"height":24,"seed":769875327,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669340484981,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Fall","rawText":"Fall","baseline":20,"textAlign":"center","verticalAlign":"middle","containerId":"sRV2I3u5YmLmW1mMZtcg3","originalText":"Fall"},{"type":"arrow","version":1362,"versionNonce":934030573,"isDeleted":false,"id":"CZZBlZLQcMsvBM3Y59OCy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-253.4290227195139,"y":-1122.2797250196272,"strokeColor":"#e67700","backgroundColor":"transparent","width":2.2593013004079125,"height":37.69336680898891,"seed":447380977,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669340477776,"link":null,"locked":false,"startBinding":{"elementId":"RMNqwfWlgfbMpYooeJoeX","gap":1,"focus":-0.03564957328353111},"endBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","gap":1,"focus":-0.06348442400404053},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2.2593013004079125,37.69336680898891]]},{"type":"arrow","version":1739,"versionNonce":421711267,"isDeleted":false,"id":"ZGWdRa8JACOlC9W9gZeZ8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-259.428156359733,"y":-1048.5863582106383,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.23951808540243746,"height":38.582650325370196,"seed":431576479,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669340474453,"link":null,"locked":false,"startBinding":{"elementId":"3KIpf-rkzikNMb_aR0m7y","gap":1,"focus":0.09774181347325406},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","gap":1,"focus":-0.10580130154277227},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.23951808540243746,38.582650325370196]]},{"type":"arrow","version":1571,"versionNonce":1146865443,"isDeleted":false,"id":"rOdClYNLCyfLF1jbUwU8F","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-255.8599126359509,"y":-974.0037078852681,"strokeColor":"#e67700","backgroundColor":"transparent","width":1.0056080452798994,"height":59.89627715498432,"seed":2036832209,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669340484982,"link":null,"locked":false,"startBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","focus":0.07081131742136672,"gap":1},"endBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","focus":0.035785059455317375,"gap":1.0636954782002022},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1.0056080452798994,59.89627715498432]]},{"type":"arrow","version":3073,"versionNonce":1328983939,"isDeleted":false,"id":"SgfLADjg34eKJoEx705pv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-250.5639760769339,"y":-877.4550336065713,"strokeColor":"#e67700","backgroundColor":"transparent","width":125.88014104754569,"height":130.68243448093324,"seed":1763690303,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669340484982,"link":null,"locked":false,"startBinding":{"elementId":"sRV2I3u5YmLmW1mMZtcg3","gap":1.5887016455122875,"focus":0.2823770877995944},"endBinding":{"elementId":"g3GQAZzBP1tmYREzU3GFV","gap":2.713513145805365,"focus":-0.9124661334787617},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[28.644564085615173,21.197090287284823],[110.49562485927345,2.7482281527666146],[125.88014104754569,-77.08036335357099],[107.40677194569227,-109.48534419364842]]}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#e67700","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":3,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightOverallexcalidraw.md2");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


*Move left/right* is the start of a **loop**. After *Fall*, it goes back to the beginning at Left/right. In this case the loop goes forever.

So, let's put in  left/right and fall stacks.

```ad-scratch
title: main sprite
~~~scratchblock
when @greenFlag clicked
broadcast [initialize v]


when I receive [initialize v]
...
broadcast [move left / right v]

when I receive [move left / right v]
broadcast [fall v]


when I receive [fall v]
broadcast [move left / right v]

~~~
```

So let's do the left right routine. In words, the basic routine is this:

<div id="HatlightmoveLeftRight.excalidraw.md3"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":2483,"versionNonce":1247119587,"isDeleted":false,"id":"j46Q-mIB_RMtLqBuMi9Jo","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-333.2813200409966,"y":-457.07274754709914,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":418,"height":58,"seed":216207345,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"hoKKMoqj","type":"text"}],"updated":1669342606930,"link":null,"locked":false},{"type":"text","version":2696,"versionNonce":135477699,"isDeleted":false,"id":"hoKKMoqj","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-328.7813200409966,"y":-452.07274754709914,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":409,"height":48,"seed":1921704863,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342586279,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Detect arrows and set the x-speed \nvariable","rawText":"Detect arrows and set the x-speed variable","baseline":44,"textAlign":"center","verticalAlign":"middle","containerId":"j46Q-mIB_RMtLqBuMi9Jo","originalText":"Detect arrows and set the x-speed variable"},{"type":"rectangle","version":2742,"versionNonce":310883427,"isDeleted":false,"id":"IoJwQQFPcnide1ayTmbpU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-301.7813200409966,"y":-368.63565331462917,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":355,"height":58,"seed":2059266513,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"KNDBm7n1","type":"text"},{"id":"BQTp2Km0sXOdqGU8mgJqd","type":"arrow"}],"updated":1669342631811,"link":null,"locked":false},{"type":"text","version":2895,"versionNonce":250518765,"isDeleted":false,"id":"KNDBm7n1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-297.2813200409966,"y":-363.63565331462917,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":346,"height":48,"seed":130750399,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Keep x-speed below a maximum \nspeed","rawText":"Keep x-speed below a maximum speed","baseline":44,"textAlign":"center","verticalAlign":"middle","containerId":"IoJwQQFPcnide1ayTmbpU","originalText":"Keep x-speed below a maximum speed"},{"type":"rectangle","version":2688,"versionNonce":1182008749,"isDeleted":false,"id":"ABGizyKxq-GGhHL1bSIUj","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-225.7813200409966,"y":-276.7620826530891,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":203,"height":58,"seed":2145552305,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"llvdtr75","type":"text"},{"id":"dKCsiULa4aCptAMA4JZvi","type":"arrow"},{"id":"BQTp2Km0sXOdqGU8mgJqd","type":"arrow"},{"id":"3kD_5vABuaYS-50Mz2okq","type":"arrow"}],"updated":1669342631811,"link":null,"locked":false},{"type":"text","version":2878,"versionNonce":83439619,"isDeleted":false,"id":"llvdtr75","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-221.2813200409966,"y":-271.7620826530891,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":194,"height":48,"seed":1261422559,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"change x by \nx-speed","rawText":"change x by x-speed","baseline":44,"textAlign":"center","verticalAlign":"middle","containerId":"ABGizyKxq-GGhHL1bSIUj","originalText":"change x by x-speed"},{"type":"rectangle","version":2570,"versionNonce":783895363,"isDeleted":false,"id":"ZLp42ksZ46S107PNBhQAh","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-162.2813200409966,"y":-182.18015978307884,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":76,"height":34,"seed":376990097,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"7coyg3pg","type":"text"},{"id":"dKCsiULa4aCptAMA4JZvi","type":"arrow"},{"id":"3kD_5vABuaYS-50Mz2okq","type":"arrow"}],"updated":1669342631811,"link":null,"locked":false},{"type":"text","version":2713,"versionNonce":513853453,"isDeleted":false,"id":"7coyg3pg","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-148.7813200409966,"y":-177.18015978307884,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":49,"height":24,"seed":2060022783,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Fall","rawText":"Fall","baseline":20,"textAlign":"center","verticalAlign":"middle","containerId":"ZLp42ksZ46S107PNBhQAh","originalText":"Fall"},{"type":"arrow","version":2879,"versionNonce":751189613,"isDeleted":false,"id":"dKCsiULa4aCptAMA4JZvi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-124.01397947517343,"y":-145.517117753767,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.28874846551465794,"height":0.1462436558385889,"seed":166066513,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"startBinding":{"elementId":"ZLp42ksZ46S107PNBhQAh","gap":3.1878291699105725,"focus":0.026503790986018495},"endBinding":{"elementId":"ZLp42ksZ46S107PNBhQAh","gap":1.0333333333333334,"focus":-0.03069383178984822},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.28874846551465794,-0.1462436558385889]]},{"type":"arrow","version":2373,"versionNonce":1973896387,"isDeleted":false,"id":"BXhvDQHmQzR-Mp2WdIDRD","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-124.56009098516891,"y":-397.85085198848293,"strokeColor":"#e67700","backgroundColor":"transparent","width":0,"height":27.782745361328125,"seed":1288981813,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0,27.782745361328125]]},{"type":"arrow","version":2412,"versionNonce":38172493,"isDeleted":false,"id":"BQTp2Km0sXOdqGU8mgJqd","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-124.96984034609525,"y":-310.1957663970771,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.01183763971259566,"height":32.57754501158621,"seed":323426581,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"startBinding":{"elementId":"IoJwQQFPcnide1ayTmbpU","focus":-0.0042626224508648895,"gap":3.15618896484375},"endBinding":{"elementId":"ABGizyKxq-GGhHL1bSIUj","focus":0.005809692111724222,"gap":3.2554103051411403},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0.01183763971259566,32.57754501158621]]},{"type":"arrow","version":1688,"versionNonce":251279267,"isDeleted":false,"id":"3kD_5vABuaYS-50Mz2okq","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-124.95193707600501,"y":-216.8726133364072,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.007373942970190228,"height":32.4190673828125,"seed":1637309077,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342631811,"link":null,"locked":false,"startBinding":{"elementId":"ABGizyKxq-GGhHL1bSIUj","focus":-0.0004688343721599147,"gap":3.3189400973726606},"endBinding":{"elementId":"ZLp42ksZ46S107PNBhQAh","focus":0.007914750444716614,"gap":2.51663852016722},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.007373942970190228,32.4190673828125]]}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#e67700","currentItemBackgroundColor":"transparent","currentItemFillStyle":"solid","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":3,"currentItemFontSize":20,"currentItemTextAlign":"center","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightmoveLeftRight.excalidraw.md3");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


The first 2 will be simple **myblocks**. To make a simple myblock:
- In the block area, click `Make a Block`, 
- fill in the name of the myblock (see the description below) and click ok
- then find that myblock in the block area,
- and drag the myblock into the stack

The last 2 are ordinary blocks. Here is the code:

```ad-scratch
title: hitbox, receive left/right
~~~scratchblock
when I receive [move left / right v]
set xspeed::custom
keep speed below max::custom
change x by (x speed)
broadcast [fall v]
~~~
```

Let's code two myblocks.

### Set xspeed myblock

Setting the xspeed has 2 steps. We start with an if/else block.
       - If no key is being held, then slow the speed down. 
       - There are 2 directions:
      	Let's say we are going **right**
	      	Our speed is +2. 
               The positive sign (+) tells us our direction is right.We are going 2 units fast. 
               To slow down, we change the 2, but keep the +, since the direction is the same.
               In other words: +2 becomes +1. We **subtract 1**.
      	Let's say we are going **left**
      		Our speed is -2.  
      		How fast is still 2, but the negative sign (-) tells us the direction is left.
      		Slowing down means the 2 becomes a 1. But the direction stays the same, so we keep the negative sign.
      		In other words, -2 becomes -1. We **add 1**.
      	- in other words: 
      			*left* **+1** 
      			*right* **-1**
      	- in other words:  
      			(left) speed **less than** 0 is **+1** 
      			(right) speed **greater than** 0 is **-1** 

```ad-scratch
title: hitbox, define set xspeed
~~~scratchblock
define set xspeed
if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
left
if <(x speed) < (0)> then
      change (x speed) by (1)
      end
right
if <(x speed) > (0)> then
      change (x speed) by (-1)
      end
else
end
~~~
```



(Below, I have given a way to put all this in one line.[^2] One line, without the if, is faster, so in big games it is better.)

In the else part of the if/else block:
* If we are touching an arrow, speed up in the direction of the arrow.
	* To speed up, we **add 1** if we want to go right (*right arrow*), and **subtract 1** to go left (*left arrow*), so left gets the negative sign.

```ad-scratch
title: hitbox, define set xspeed
~~~scratchblock

define set xspeed
if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
if <(x speed) < (0)> then
	change (x speed) by (1)
	end
	if <(x speed) > (0)> then
	change (x speed) by (-1)
	end
else
right 
if <key [right arrow v] pressed> then
	change (x speed) by (1)
end
left
if <key [left arrow v] pressed> then
	change (x speed) by (-1)
end
end
~~~
```


### Keep speed below max myblock

Keeping the speed below the max is easy, but, again, we have to remember that left and right are different.
```ad-scratch
title: hitbox, define keep speed below max
~~~scratchblock


define keep speed below max
set maximum speed
moving right:
if <(x speed) \> [4]> then
    set [x speed v] to [4]
end
moving left:
if <(x speed) \< [-4]> then
    set [x speed v] to [-4]
end
~~~
```

# Falling

Next we will teach our guy to fall. First, we need a platform or wall for the character to fall onto. So make one.

<div id="HatlightPlatform.excalidraw.md4"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":147,"versionNonce":2023188251,"isDeleted":false,"id":"-BhE3qjFz7EzdAMw-8k5u","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-198.8213895022215,"y":-231.31190412472455,"strokeColor":"#000000","backgroundColor":"#15aabf","width":580.8837890625,"height":391.697998046875,"seed":2096960897,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669149990766,"link":null,"locked":false},{"type":"rectangle","version":141,"versionNonce":870929379,"isDeleted":false,"id":"K6F48gfgbAf7FfVEZiAFg","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-200.221923828125,"y":52.3824462890625,"strokeColor":"#000000","backgroundColor":"#fa5252","width":578.7227783203125,"height":52.170654296875,"seed":82281487,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"9I-onR_TnxsWehH5Y7p2I","type":"arrow"},{"id":"oIGih9U9zFPPHVnpe0U7I","type":"arrow"}],"updated":1669342661397,"link":null,"locked":false},{"type":"rectangle","version":179,"versionNonce":745533753,"isDeleted":false,"id":"n2TPaNDw8CFg9ZS1F-NcI","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-131.50845336914062,"y":-49.205535888671875,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1020124033,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"0nTujerjs8bk4BAkzAtd5","type":"arrow"},{"id":"9I-onR_TnxsWehH5Y7p2I","type":"arrow"}],"updated":1668907730051,"link":null,"locked":false},{"type":"text","version":158,"versionNonce":1486115523,"isDeleted":false,"id":"S13IR9yP","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":37.955902099609375,"y":-46.94099426269531,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":143,"height":24,"seed":78555537,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"oIGih9U9zFPPHVnpe0U7I","type":"arrow"}],"updated":1669342670503,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"New Platform","rawText":"New Platform","baseline":20,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"New Platform"},{"type":"arrow","version":471,"versionNonce":1889731171,"isDeleted":false,"id":"oIGih9U9zFPPHVnpe0U7I","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":114.17423255368223,"y":-19.569026294354188,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":56.65499939963845,"height":69.81109172404169,"seed":875514001,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342670503,"link":null,"locked":false,"startBinding":{"elementId":"S13IR9yP","focus":-0.2115405083438377,"gap":3.3719679683411243},"endBinding":{"elementId":"K6F48gfgbAf7FfVEZiAFg","focus":-0.17559197508991395,"gap":2.140380859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-56.65499939963845,69.81109172404169]]},{"type":"text","version":292,"versionNonce":742083363,"isDeleted":false,"id":"nqnPZZR9","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-7.975054618639831,"y":-136.31231493827624,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":73,"height":24,"seed":430884447,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"0nTujerjs8bk4BAkzAtd5","type":"arrow"}],"updated":1669342679221,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Hitbox","rawText":"Hitbox","baseline":20,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"Hitbox"},{"type":"arrow","version":794,"versionNonce":965471939,"isDeleted":false,"id":"0nTujerjs8bk4BAkzAtd5","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-17.86428278139013,"y":-108.73620033589758,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":63.11020814610512,"height":56.92907142964758,"seed":503215935,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342679222,"link":null,"locked":false,"startBinding":{"elementId":"nqnPZZR9","focus":0.5851118584451094,"gap":10.515960693359375},"endBinding":{"elementId":"n2TPaNDw8CFg9ZS1F-NcI","focus":-0.1920958528217059,"gap":2.601593017578125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-63.11020814610512,56.92907142964758]]},{"type":"arrow","version":204,"versionNonce":579342615,"isDeleted":false,"id":"9I-onR_TnxsWehH5Y7p2I","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-89.84741210937501,"y":13.333648681640629,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":1.22406005859375,"height":35.57952880859375,"seed":470672351,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668907730051,"link":null,"locked":false,"startBinding":{"elementId":"n2TPaNDw8CFg9ZS1F-NcI","focus":-0.4814271652162273,"gap":7.78997802734375},"endBinding":{"elementId":"K6F48gfgbAf7FfVEZiAFg","focus":-0.6243659421659179,"gap":3.469268798828125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.22406005859375,35.57952880859375]]},{"type":"text","version":53,"versionNonce":915304409,"isDeleted":false,"id":"Wls7tnzk","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-81.95840454101562,"y":16.0592041015625,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":61,"height":24,"seed":1494065215,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668907730051,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"fall!","rawText":"fall!","baseline":20,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"fall!"}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"#15aabf","currentItemFillStyle":"solid","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":2,"currentItemOpacity":100,"currentItemFontFamily":3,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"round","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightPlatform.excalidraw.md4");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


Our basic fall routine is 

<div id="HatlightFalling.excalidraw.md5"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1710,"versionNonce":347826721,"isDeleted":false,"id":"Nwu0LtqoSmT45PmOhGbI0","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-75.96467543487188,"y":-23038.28681103683,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":417,"height":34,"seed":1762656049,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"71yE5y0v","type":"text"},{"id":"jhNFrphANp3u00ECumDDS","type":"arrow"}],"updated":1669854167373,"link":null,"locked":false},{"type":"text","version":1831,"versionNonce":1693154817,"isDeleted":false,"id":"71yE5y0v","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-38.46467543487188,"y":-23033.28681103683,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":342,"height":24,"seed":1868007519,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669854167373,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Change the y speed by gravity","rawText":"Change the y speed by gravity","baseline":19,"textAlign":"center","verticalAlign":"middle","containerId":"Nwu0LtqoSmT45PmOhGbI0","originalText":"Change the y speed by gravity"},{"type":"rectangle","version":1922,"versionNonce":30229595,"isDeleted":false,"id":"1P7VB9ARxlKRJr1lHPf5q","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-97.0461413065824,"y":-22963.665813453976,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":459,"height":34,"seed":2047537425,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"oCoGhJVT","type":"text"},{"id":"KUXSVk7kjG8YUUAb-OWLF","type":"arrow"}],"updated":1669151686560,"link":null,"locked":false},{"type":"text","version":1973,"versionNonce":1022425461,"isDeleted":false,"id":"oCoGhJVT","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-79.5461413065824,"y":-22958.665813453976,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":424,"height":24,"seed":891626623,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669151686560,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Change the y position by the y speed","rawText":"Change the y position by the y speed","baseline":19,"textAlign":"center","verticalAlign":"middle","containerId":"1P7VB9ARxlKRJr1lHPf5q","originalText":"Change the y position by the y speed"},{"type":"rectangle","version":1956,"versionNonce":495766203,"isDeleted":false,"id":"dG_sTAK3ANmmsONJBhqjK","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-100.0461413065824,"y":-22884.044815871122,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":465,"height":47,"seed":1988929265,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"QObjDLxV","type":"text"},{"id":"d5gJhw0lYPrHBm7mtrV9n","type":"arrow"},{"id":"KUXSVk7kjG8YUUAb-OWLF","type":"arrow"}],"updated":1669151676814,"link":null,"locked":false},{"type":"text","version":2093,"versionNonce":210232111,"isDeleted":false,"id":"QObjDLxV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-91.0461413065824,"y":-22872.544815871122,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":447,"height":24,"seed":53099679,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669854151355,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"If inside a wall or platform, pull out","rawText":"If inside a wall or platform, pull out","baseline":19,"textAlign":"center","verticalAlign":"middle","containerId":"dG_sTAK3ANmmsONJBhqjK","originalText":"If inside a wall or platform, pull out"},{"type":"rectangle","version":2058,"versionNonce":1039794427,"isDeleted":false,"id":"u9b9U3IXBOQMFf2--IXVE","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-44.5461413065824,"y":-22791.42381828827,"strokeColor":"#5f3dc4","backgroundColor":"#fd7e14","width":354,"height":40,"seed":1226612945,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"Ar1U8pJf","type":"text"},{"id":"d5gJhw0lYPrHBm7mtrV9n","type":"arrow"}],"updated":1669151686561,"link":null,"locked":false},{"type":"text","version":2195,"versionNonce":1071383253,"isDeleted":false,"id":"Ar1U8pJf","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-21.0461413065824,"y":-22783.42381828827,"strokeColor":"#5f3dc4","backgroundColor":"transparent","width":307,"height":24,"seed":1561809087,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669151686561,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"Go back to move left/right","rawText":"Go back to move left/right","baseline":19,"textAlign":"center","verticalAlign":"middle","containerId":"u9b9U3IXBOQMFf2--IXVE","originalText":"Go back to move left/right"},{"type":"arrow","version":1806,"versionNonce":916489327,"isDeleted":false,"id":"jhNFrphANp3u00ECumDDS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":132.4236646081389,"y":-23003.28681103683,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.16184895515772268,"height":39.80421265341647,"seed":525491889,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669854167373,"link":null,"locked":false,"startBinding":{"elementId":"Nwu0LtqoSmT45PmOhGbI0","gap":1,"focus":0.0001844457279652866},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.16184895515772268,39.80421265341647]]},{"type":"arrow","version":2473,"versionNonce":2075328353,"isDeleted":false,"id":"KUXSVk7kjG8YUUAb-OWLF","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":133.67960528056005,"y":-22923.553386536703,"strokeColor":"#e67700","backgroundColor":"transparent","width":0.492498429923387,"height":37.22036748382743,"seed":2089607391,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669854151354,"link":null,"locked":false,"startBinding":{"elementId":"1P7VB9ARxlKRJr1lHPf5q","gap":6.112426917272387,"focus":-0.004223765307398561},"endBinding":{"elementId":"dG_sTAK3ANmmsONJBhqjK","gap":2.288203181753488,"focus":0.008846119530847275},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0.492498429923387,37.22036748382743]]},{"type":"arrow","version":2061,"versionNonce":388080975,"isDeleted":false,"id":"d5gJhw0lYPrHBm7mtrV9n","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":134.62675031530128,"y":-22832.01516695504,"strokeColor":"#e67700","backgroundColor":"transparent","width":1.4063580092289953,"height":37.34609678099514,"seed":131424401,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669854151359,"link":null,"locked":false,"startBinding":{"elementId":"dG_sTAK3ANmmsONJBhqjK","gap":5.029648916082806,"focus":-0.014401483586944952},"endBinding":{"elementId":"u9b9U3IXBOQMFf2--IXVE","gap":3.2452518857753603,"focus":-0.0006122131952285393},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.4063580092289953,37.34609678099514]]}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#e67700","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":3,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalling.excalidraw.md5");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


So we have 2 steps
1. Fall as far as you need to or until you hit a wall
2. Pull up if you have to.

```ad-scratch
title: hitbox, receive fall
~~~scratchblock

when I receive [fall v]
change [y speed v] by (-1)
change y by (y speed) in steps. Stop at wall.::custom
At this point we may be touching a wall
If so, we should pull out of the wall
Our speed +/- tells us whether we are either moving up {ceiling} or down {floor}
pull up or down if touching walls or <(y speed) \< [0]> or not::custom
broadcast [move left / right v]

~~~
```

We'll have to make 2 myblocks, but these are a little different. One has an input field, and the other has a boolean field. 

First, let's make the change y myblock. To make this, click `create a block` like before, and this time:
1. fill in the first label ("`change y by`")
2. add an input field (`y speed`) (round edges "( ... )" )
	- Input fields take variables and expressions like a + b.
3. and add another label field ("`in steps. Stop at wall`")
	- The actual label text is not important, and you can choose your own words. Make it meaningful for you.

```ad-scratch
title: hitbox, define change y
~~~scratchblock
define change y by (y speed) in steps. Stop at wall.::custom
~~~
```

The second is the pull up myblock. To make this:
1. fill in the first label ("`pull up or down if touching walls`") 
2. add a **boolean** field <`falling?`> (pointy edges "< ... >")
	- **Be careful**. A **boolean** field is different than an input field. It only takes things like sensing blocks and logical connectors (`and`, `or`)
3. and another label field ("`or not`")
	- Again you can choose your own words for the text of the fields.  Make it meaningful for you.

```ad-scratch
title: hitbox, define pull up
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
~~~
```

Now, let's make the code for the myblocks.

### Not big jumps, but single steps

We could change the y position by y speed in big jumps, like on the left in the diagram below, but it might turn out we will jump beyond the platform. Notice how the jumps get bigger and bigger. This is gravity pulling the hitbox down.

Instead we want to change y in small steps as in the right. Each small step repeats *y-speed times*, and we check and stop if it hits a wall.

<div id="HatlightFalllingInSteps.excalidraw.md6"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":193,"versionNonce":792307351,"isDeleted":false,"id":"X3eKC4g-yx-XMt1rWBuif","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":90,"angle":0,"x":-446.4549560546875,"y":-223.33203456712806,"strokeColor":"#000000","backgroundColor":"#15aabf","width":580.8837890625,"height":409.2378845214844,"seed":1523261399,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668902884753,"link":null,"locked":false},{"type":"rectangle","version":300,"versionNonce":1372210807,"isDeleted":false,"id":"0fbDeUvnFGOAHWrwifOSV","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-447.225341796875,"y":60.57232666015625,"strokeColor":"#000000","backgroundColor":"#fa5252","width":578.7227783203125,"height":52.170654296875,"seed":1658367257,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"KzzUe-i6RXE-mzwhfi58q","type":"arrow"},{"id":"BLtrddpDIMI7sGaAGwKk-","type":"arrow"},{"id":"X0vEXzL366tfW-NuY40fC","type":"arrow"}],"updated":1668902892330,"link":null,"locked":false},{"type":"rectangle","version":244,"versionNonce":903324345,"isDeleted":false,"id":"aSzZsl74H852Oj-GLVfFu","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-378.5940653483073,"y":-171.21595836821058,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1445399799,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false},{"type":"arrow","version":466,"versionNonce":1861468503,"isDeleted":false,"id":"g4ekkcbqxsQejMG8sMtHJ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-322.04160417829235,"y":-119.28085908435634,"strokeColor":"#000000","backgroundColor":"transparent","width":34.315359933035836,"height":40.774100167410666,"seed":1905810487,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[30.880417596726204,25.17081124441961],[-3.434942336309632,40.774100167410666]]},{"type":"arrow","version":661,"versionNonce":2082792345,"isDeleted":false,"id":"2AgNi4LavDQ_DT3pTVCAZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-325.1728239513577,"y":-75.07850138346353,"strokeColor":"#000000","backgroundColor":"transparent","width":30.530598958333485,"height":47.169131324404646,"seed":983790713,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[28.942522321428612,24.00812058221726],[-1.5880766369048729,47.169131324404646]]},{"type":"arrow","version":1089,"versionNonce":2076729239,"isDeleted":false,"id":"X0vEXzL366tfW-NuY40fC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-327.6087661016555,"y":-26.44208490280866,"strokeColor":"#000000","backgroundColor":"transparent","width":34.75597563244054,"height":71.13309442429308,"seed":1849024089,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668902892330,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"0fbDeUvnFGOAHWrwifOSV","focus":-0.6814801411047785,"gap":15.881317138671847},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[34.75597563244054,31.764758882068406],[10.047314073160862,71.13309442429308]]},{"type":"arrow","version":1086,"versionNonce":1948806615,"isDeleted":false,"id":"KzzUe-i6RXE-mzwhfi58q","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-318.67275529515456,"y":46.66189139229917,"strokeColor":"#000000","backgroundColor":"transparent","width":36.471470424107224,"height":99.6491335914248,"seed":595548951,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1668902902752,"link":null,"locked":false,"startBinding":{"elementId":"0fbDeUvnFGOAHWrwifOSV","focus":0.4731328064733432,"gap":13.910435267857082},"endBinding":{"elementId":"FFjJe3DO","focus":-0.22043555957681688,"gap":1.6255536760602638},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[21.017031360072792,46.019605364118206],[-15.454439064034432,99.6491335914248]]},{"type":"text","version":160,"versionNonce":374773655,"isDeleted":false,"id":"FFjJe3DO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-431.50949823288687,"y":147.93657865978423,"strokeColor":"#000000","backgroundColor":"transparent","width":230,"height":25,"seed":1764694073,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"KzzUe-i6RXE-mzwhfi58q","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"oops I jumped too far!","rawText":"oops I jumped too far!","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"oops I jumped too far!"},{"type":"rectangle","version":377,"versionNonce":296849753,"isDeleted":false,"id":"UdmsIpWycJ77Ag8M3_jmW","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-147.30171857561396,"y":-169.37390500023255,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1579585465,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false},{"type":"text","version":472,"versionNonce":1223527607,"isDeleted":false,"id":"XbZ1dBRn","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-147.31605893089665,"y":67.45377478661476,"strokeColor":"#000000","backgroundColor":"transparent","width":109,"height":40,"seed":327270615,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":15.849432887262545,"fontFamily":1,"text":"I stop when\nI hit the wall","rawText":"I stop when\nI hit the wall","baseline":34,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"I stop when\nI hit the wall"},{"type":"arrow","version":2598,"versionNonce":805830201,"isDeleted":false,"id":"bwETjqIAwsfaCBXToq7mr","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162217,"y":-114.2402766778728,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":1736422807,"groupIds":["wyA1Lk3TbbMGq0vS8op__"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"ctgLPHBO","focus":1.3025348090580142,"gap":11.247209584646924},"endBinding":{"elementId":"FTeCu3eZ","focus":0.21833418349062747,"gap":14.0985978045654},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1143,"versionNonce":858316247,"isDeleted":false,"id":"FTeCu3eZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725425,"y":-117.71653355325589,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":431051609,"groupIds":["wyA1Lk3TbbMGq0vS8op__"],"strokeSharpness":"sharp","boundElements":[{"id":"bwETjqIAwsfaCBXToq7mr","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":572,"versionNonce":381538073,"isDeleted":false,"id":"i5h6ALg0GKwRab9r0C90J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-86.0445995248241,"y":-118.44435015194466,"strokeColor":"#000000","backgroundColor":"transparent","width":36.829425328712304,"height":41.91725264538508,"seed":2040880983,"groupIds":["GqIiQvxPWWtvjf3-ZGR_E"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"UdmsIpWycJ77Ag8M3_jmW","focus":-0.058536680852082454,"gap":3.9914940507898677},"endBinding":{"elementId":"jJvHk8rL","focus":0.5505995457757742,"gap":15.816156400444058},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[30.880417596726204,25.17081124441961],[-5.9490077319861,41.91725264538508]]},{"type":"arrow","version":769,"versionNonce":404556535,"isDeleted":false,"id":"xE_jOsYBF4k_BoFbHpGdK","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-91.73554451131523,"y":-76.36531089920823,"strokeColor":"#000000","backgroundColor":"transparent","width":31.502247534854376,"height":49.38529208954589,"seed":1701062041,"groupIds":["GqIiQvxPWWtvjf3-ZGR_E"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"7XmCKnsZ","focus":-3.0261669778726485,"gap":15.746478778799087},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[31.502247534854376,26.131439030373656],[0.8699029710521415,49.38529208954589]]},{"type":"arrow","version":1107,"versionNonce":1279689721,"isDeleted":false,"id":"BLtrddpDIMI7sGaAGwKk-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-91.61176144818722,"y":-25.530696345233416,"strokeColor":"#000000","backgroundColor":"transparent","width":38.19080171130963,"height":70.15996040459827,"seed":781016183,"groupIds":["GqIiQvxPWWtvjf3-ZGR_E"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"lDDvswtv","focus":0.5780699842586904,"gap":12.76317613019792},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[34.75597563244054,31.689879256904867],[-3.4348260788690936,70.15996040459827]]},{"type":"arrow","version":2770,"versionNonce":1682871319,"isDeleted":false,"id":"30AQK5MQuPXKIWI8XeajQ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162218,"y":-99.51681021784279,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":882254841,"groupIds":["UCExYSlleJjMwFZ7Qzell"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"ctgLPHBO","focus":-0.05236135082726946,"gap":10.812885025632056},"endBinding":{"elementId":"ctgLPHBO","focus":0.21833418349062633,"gap":14.098597804565372},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1235,"versionNonce":1017486553,"isDeleted":false,"id":"ctgLPHBO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725424,"y":-102.99306709322587,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":575206423,"groupIds":["UCExYSlleJjMwFZ7Qzell"],"strokeSharpness":"sharp","boundElements":[{"id":"30AQK5MQuPXKIWI8XeajQ","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"bwETjqIAwsfaCBXToq7mr","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3151,"versionNonce":2142370103,"isDeleted":false,"id":"G4TbwLAZZPqXZpdYasfnt","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.66913826448226,"y":-61.49893796083916,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.201091416683255,"height":11.462341104562512,"seed":526494103,"groupIds":["weyBgE4-Gw0c2s9XRE2_F"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"jJvHk8rL","focus":-1.644936525924756,"gap":8.722620557558997},"endBinding":{"elementId":"jJvHk8rL","focus":-1.4923387363459997,"gap":13.899216539584984},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[2.630232044653468,11.462341104562512]]},{"type":"text","version":1374,"versionNonce":124688825,"isDeleted":false,"id":"7XmCKnsZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.48202329011431,"y":-65.06769084119384,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":1075355481,"groupIds":["weyBgE4-Gw0c2s9XRE2_F"],"strokeSharpness":"sharp","boundElements":[{"id":"G4TbwLAZZPqXZpdYasfnt","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3135,"versionNonce":1605089879,"isDeleted":false,"id":"BIlN-z6qp0Zwaqb-TssE9","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.9968786316222,"y":-42.58356603282854,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":1807732951,"groupIds":["NQ-rDOsEk5HrskJzH4NlO"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"htRXZrxu","focus":1.6426025233326276,"gap":14.580910871420855},"endBinding":{"focus":0.21833418349062633,"gap":14.098597804565372,"elementId":"lW84oqgi"},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1416,"versionNonce":231013017,"isDeleted":false,"id":"lW84oqgi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725422,"y":-46.05982290821163,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":226724889,"groupIds":["NQ-rDOsEk5HrskJzH4NlO"],"strokeSharpness":"sharp","boundElements":[{"id":"BIlN-z6qp0Zwaqb-TssE9","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"},{"id":"G4TbwLAZZPqXZpdYasfnt","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3317,"versionNonce":1707523625,"isDeleted":false,"id":"itKSWnAAJjQpjm2vWnion","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-98.07172168029871,"y":-79.2060268563084,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":12.926063450679067,"height":10.229271525456682,"seed":1900335223,"groupIds":["rDGyDIC4wj-sxzu3feEwR"],"strokeSharpness":"round","boundElements":[],"updated":1669420769544,"link":null,"locked":false,"startBinding":{"elementId":"jJvHk8rL","focus":-0.4600932661649485,"gap":9.738041976955543},"endBinding":{"elementId":"jJvHk8rL","focus":0.21833418349062747,"gap":14.0985978045654},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-8.565507623069209,7.309658929014603],[4.360555827609858,10.229271525456682]]},{"type":"text","version":1321,"versionNonce":1079787385,"isDeleted":false,"id":"jJvHk8rL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725425,"y":-83.384391276721,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":1317525113,"groupIds":["rDGyDIC4wj-sxzu3feEwR"],"strokeSharpness":"sharp","boundElements":[{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"},{"id":"G4TbwLAZZPqXZpdYasfnt","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":2918,"versionNonce":841240727,"isDeleted":false,"id":"pbeHb5a0uoNX9WtBB610c","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162218,"y":-24.52639828602463,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":652062743,"groupIds":["4rrK6TF_CuV7ezukefjSq"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"FriW2rj1","focus":1.2454866162586973,"gap":13.018445883231465},"endBinding":{"elementId":"htRXZrxu","focus":0.218334183490629,"gap":14.098597804565372},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1309,"versionNonce":762832985,"isDeleted":false,"id":"htRXZrxu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725424,"y":-28.002655161407688,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":52838617,"groupIds":["4rrK6TF_CuV7ezukefjSq"],"strokeSharpness":"sharp","boundElements":[{"id":"pbeHb5a0uoNX9WtBB610c","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"BIlN-z6qp0Zwaqb-TssE9","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3276,"versionNonce":1956390327,"isDeleted":false,"id":"BZmTNh1W-NmZpnKNsAg8b","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162218,"y":32.21260428854929,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":639882839,"groupIds":["8H2UnQk_e6PsHRJ2vF_T5"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"gyk0nbcr","focus":-2.0005529473798833,"gap":11.941413967393373},"endBinding":{"elementId":"lDDvswtv","focus":1.4681909500270411,"gap":10.245825698741498},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1488,"versionNonce":1324053817,"isDeleted":false,"id":"GhGulrWn","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725424,"y":28.7363474131662,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":527212185,"groupIds":["8H2UnQk_e6PsHRJ2vF_T5"],"strokeSharpness":"sharp","boundElements":[{"id":"BZmTNh1W-NmZpnKNsAg8b","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3411,"versionNonce":2140952279,"isDeleted":false,"id":"Sz8xeGELrBil9xoaOIm_J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162218,"y":47.314133496645894,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":1549525337,"groupIds":["UWcnU8VbgbX9PWpg8IRha"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"lDDvswtv","focus":-0.05236135082726946,"gap":10.812885025632056},"endBinding":{"focus":0.21833418349062633,"gap":14.098597804565372,"elementId":"lDDvswtv"},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1561,"versionNonce":404383257,"isDeleted":false,"id":"lDDvswtv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725424,"y":43.83787662126281,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":282082487,"groupIds":["UWcnU8VbgbX9PWpg8IRha"],"strokeSharpness":"sharp","boundElements":[{"id":"Sz8xeGELrBil9xoaOIm_J","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"},{"id":"BZmTNh1W-NmZpnKNsAg8b","type":"arrow"},{"id":"BLtrddpDIMI7sGaAGwKk-","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3339,"versionNonce":1505321975,"isDeleted":false,"id":"R4mfxyq1rVtvRc5OSL9QM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162221,"y":-9.284282918482006,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":1492729529,"groupIds":["nwIQTCVt-HW39_YL7nIJy"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"FriW2rj1","focus":-0.052361350827266985,"gap":10.812885025632},"endBinding":{"focus":0.21833418349062633,"gap":14.098597804565372,"elementId":"FriW2rj1"},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1521,"versionNonce":1140341497,"isDeleted":false,"id":"FriW2rj1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725421,"y":-12.760539793865092,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":1028253015,"groupIds":["nwIQTCVt-HW39_YL7nIJy"],"strokeSharpness":"sharp","boundElements":[{"id":"R4mfxyq1rVtvRc5OSL9QM","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"},{"id":"G4TbwLAZZPqXZpdYasfnt","type":"arrow"},{"id":"pbeHb5a0uoNX9WtBB610c","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"arrow","version":3471,"versionNonce":1123536151,"isDeleted":false,"id":"sGG3rEuEkggAAXmB2n6iz","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-96.99687863162221,"y":11.452688849983957,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":13.856572150963103,"height":10.931379070486201,"seed":567682297,"groupIds":["8PqRhJn4x0YIw2xmuRPxm"],"strokeSharpness":"round","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"startBinding":{"elementId":"gyk0nbcr","focus":-0.052361350827266985,"gap":10.812885025632},"endBinding":{"focus":0.21833418349062633,"gap":14.098597804565372,"elementId":"gyk0nbcr"},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-10.570859372029787,5.047996387929032],[3.2857127789333163,10.931379070486201]]},{"type":"text","version":1587,"versionNonce":1661498329,"isDeleted":false,"id":"gyk0nbcr","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-113.80976365725421,"y":7.976431974600871,"strokeColor":"#c92a2a","backgroundColor":"transparent","width":6,"height":19,"seed":700810007,"groupIds":["8PqRhJn4x0YIw2xmuRPxm"],"strokeSharpness":"sharp","boundElements":[{"id":"sGG3rEuEkggAAXmB2n6iz","type":"arrow"},{"id":"i5h6ALg0GKwRab9r0C90J","type":"arrow"},{"id":"xE_jOsYBF4k_BoFbHpGdK","type":"arrow"},{"id":"itKSWnAAJjQpjm2vWnion","type":"arrow"},{"id":"G4TbwLAZZPqXZpdYasfnt","type":"arrow"},{"id":"BZmTNh1W-NmZpnKNsAg8b","type":"arrow"}],"updated":1668902875756,"link":null,"locked":false,"fontSize":14.39868181190029,"fontFamily":1,"text":"1","rawText":"1","baseline":13,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"1"},{"type":"text","version":289,"versionNonce":114037303,"isDeleted":false,"id":"eF8vvNIu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-49.29003906249994,"y":-99.5947307900434,"strokeColor":"#000000","backgroundColor":"transparent","width":25,"height":25,"seed":1001960855,"groupIds":["XTuGMrxn6Otwpjz8ioNSR"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-2","rawText":"-2","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-2"},{"type":"text","version":346,"versionNonce":694063289,"isDeleted":false,"id":"1eX2ixah","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-48.29003906249994,"y":-4.668798405370609,"strokeColor":"#000000","backgroundColor":"transparent","width":23,"height":25,"seed":2019289783,"groupIds":["XTuGMrxn6Otwpjz8ioNSR"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-4","rawText":"-4","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-4"},{"type":"text","version":336,"versionNonce":236630871,"isDeleted":false,"id":"uqL6JY9q","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-48.79003906249994,"y":-59.30485448796003,"strokeColor":"#000000","backgroundColor":"transparent","width":24,"height":25,"seed":1001816121,"groupIds":["XTuGMrxn6Otwpjz8ioNSR"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-3","rawText":"-3","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-3"},{"type":"text","version":217,"versionNonce":2090733977,"isDeleted":false,"id":"WcU2UzjQ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-73.79003906249994,"y":-139.4268966608749,"strokeColor":"#000000","backgroundColor":"transparent","width":74,"height":25,"seed":1711725591,"groupIds":["XTuGMrxn6Otwpjz8ioNSR"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"y-speed","rawText":"y-speed","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"y-speed"},{"type":"text","version":320,"versionNonce":825766007,"isDeleted":false,"id":"IrI6KQJV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-48.29003906249994,"y":38.547635033017116,"strokeColor":"#000000","backgroundColor":"transparent","width":23,"height":25,"seed":572946999,"groupIds":["XTuGMrxn6Otwpjz8ioNSR"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-5","rawText":"-5","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-5"},{"type":"text","version":308,"versionNonce":1106933369,"isDeleted":false,"id":"Dtv9HTI8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-211.4044189453125,"y":-104.82800583612351,"strokeColor":"#000000","backgroundColor":"transparent","width":89,"height":15,"seed":1940233465,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":11.564513367491873,"fontFamily":1,"text":"repeat 2 times","rawText":"repeat 2 times","baseline":10,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"repeat 2 times"},{"type":"text","version":325,"versionNonce":1240009111,"isDeleted":false,"id":"8oL2ADB6","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-210.4044189453125,"y":-66.63830044568874,"strokeColor":"#000000","backgroundColor":"transparent","width":88,"height":15,"seed":1478327543,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875756,"link":null,"locked":false,"fontSize":11.564513367491873,"fontFamily":1,"text":"repeat 3 times","rawText":"repeat 3 times","baseline":10,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"repeat 3 times"},{"type":"text","version":337,"versionNonce":1815560025,"isDeleted":false,"id":"8xaobg7y","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-210.4044189453125,"y":-10.758631256235617,"strokeColor":"#000000","backgroundColor":"transparent","width":88,"height":15,"seed":1050181433,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":11.564513367491873,"fontFamily":1,"text":"repeat 4 times","rawText":"repeat 4 times","baseline":10,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"repeat 4 times"},{"type":"text","version":485,"versionNonce":90291895,"isDeleted":false,"id":"2lyzJYzq","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-184.4044189453125,"y":42.81446547735305,"strokeColor":"#000000","backgroundColor":"transparent","width":62,"height":15,"seed":666969721,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":11.564513367491873,"fontFamily":1,"text":"only once!!!","rawText":"only once!!!","baseline":10,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"only once!!!"},{"type":"text","version":421,"versionNonce":1235741753,"isDeleted":false,"id":"IbInAoJb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-278.8067321777344,"y":-99.5947307900434,"strokeColor":"#000000","backgroundColor":"transparent","width":25,"height":25,"seed":963405561,"groupIds":["L2mtHY-W5mC-w7fjiNLVf"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-2","rawText":"-2","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-2"},{"type":"text","version":479,"versionNonce":1984352215,"isDeleted":false,"id":"hSc6JIhn","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-277.8067321777344,"y":-4.668798405370609,"strokeColor":"#000000","backgroundColor":"transparent","width":23,"height":25,"seed":791437591,"groupIds":["L2mtHY-W5mC-w7fjiNLVf"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-4","rawText":"-4","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-4"},{"type":"text","version":467,"versionNonce":305134873,"isDeleted":false,"id":"VhzbCA86","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-278.3067321777344,"y":-59.30485448796003,"strokeColor":"#000000","backgroundColor":"transparent","width":24,"height":25,"seed":1897340889,"groupIds":["L2mtHY-W5mC-w7fjiNLVf"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-3","rawText":"-3","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-3"},{"type":"text","version":350,"versionNonce":1722596599,"isDeleted":false,"id":"QrDPRnCQ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-303.3067321777344,"y":-139.4268966608749,"strokeColor":"#000000","backgroundColor":"transparent","width":74,"height":25,"seed":659433015,"groupIds":["L2mtHY-W5mC-w7fjiNLVf"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"y-speed","rawText":"y-speed","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"y-speed"},{"type":"text","version":453,"versionNonce":893579769,"isDeleted":false,"id":"CPx8eJtp","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-277.8067321777344,"y":38.547635033017116,"strokeColor":"#000000","backgroundColor":"transparent","width":23,"height":25,"seed":1488436409,"groupIds":["L2mtHY-W5mC-w7fjiNLVf"],"strokeSharpness":"sharp","boundElements":[],"updated":1668902875757,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"-5","rawText":"-5","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"-5"}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"#15aabf","currentItemFillStyle":"solid","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":0,"currentItemOpacity":90,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("HatlightFalllingInSteps.excalidraw.md6");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


### Change y by yspeed in steps

So, what goes in this stack? How do we change y in steps? What is our code?

Well, in words it would be:
* Change y by 1 step each time --  each step is **down** so we change y by  **-1**.
* Repeat this `y speed` times

In code it would look like this (EXAMPLE 1): 

```ad-scratch
title: EXAMPLE 1
~~~scratchblock
define change y by (y speed) in steps. Stop at wall.::custom
repeat (y speed)
    change y by (-1)
end
~~~
```

But, notice that this only works if we are falling (y speed < 0), because y is going down. Later we will fix this so that it works even if we are moving up, in other words jumping.

Before that, there is one little problem. A repeat block can only use number that is *bigger* than 0 (+**positive**), like 1, 2, 3, .... 

We say it has to have a **sign of +1**. 

But, when the sprite is **falling**, `y speed`  is *less than* zero (-**negative**), like -1, -2, -3... It has a **sign of -1**.

That is not okay. +**Positive** is okay, but -**negative** has to become +positive in a repeat block. Luckily, in Scratch there is something that can help us, **abs**, which is short for **absolute value**: 

```ad-scratch
title: abs block
~~~scratchblock
[abs v] of (y speed)
~~~
```

**Abs** keeps a +positive number positive, but changes a -negative to a +positive. 

So EXAMPLE 1 should be:
```ad-scratch
title: EXAMPLE 2
~~~scratchblock
repeat ([abs v] of (y speed))
    change y by (-1)
end
~~~
```

That's pretty good. But, we also want to stop if we are touching a wall. We only want to change y by -1 *if we are **not touching a wall***. In code that means:

```ad-scratch
title: hitbox, define change y
~~~scratchblock

define change y  by (speed)  in steps. stop at wall.
repeat ([abs v] of (speed::custom)::operators)
    if <not <touching [walls v]?>> then
    change y by (-1)
    end
end
~~~
```

Again, there is a way to do this in one line.[^3]

What happens when we hit a wall when falling? The first time we touch a wall, the change y stops changing y, and were are just inside the wall. We are ready to pull out of the wall.

### Pulling up

Here is the myblock. Note that instead of an input field it has a boolean field with pointy edges: <>. Boolean fields just accept sensing and other logic blocks, not variables and expressions.
```ad-scratch
title: hitbox, pull up definition
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
~~~
```

How *do* we pull up? If we are touching a wall, we have to do two things, in this order:

1. Set `y speed` to zero
2. Pull out of the wall


<div id="pullUp1excalidraw.md7"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":467,"versionNonce":165867235,"isDeleted":false,"id":"kX6mdJgu6Z9zYzt4QkKQC","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":90,"angle":0,"x":-309.40719526241986,"y":-322.6127524742713,"strokeColor":"#000000","backgroundColor":"#15aabf","width":580.8837890625,"height":409.2378845214844,"seed":524826683,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342816112,"link":null,"locked":false},{"type":"rectangle","version":365,"versionNonce":867167853,"isDeleted":false,"id":"btiQUpFtBA806yPFVw0O4","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-308.62730916341144,"y":-141.68146946119225,"strokeColor":"#000000","backgroundColor":"#fa5252","width":578.7227783203125,"height":52.170654296875,"seed":44219637,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669342806524,"link":null,"locked":false},{"type":"rectangle","version":616,"versionNonce":308165347,"isDeleted":false,"id":"h2uqRkhOXHx654X-XRb_Z","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-262.0369364420573,"y":-183.8746464573324,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":2074835163,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342806524,"link":null,"locked":false},{"type":"arrow","version":337,"versionNonce":1977718989,"isDeleted":false,"id":"f8Uzi4SwRvBu9EFRjHf0t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-155.02411891657368,"y":-168.93575815054083,"strokeColor":"#000000","backgroundColor":"transparent","width":0,"height":59.370208740234375,"seed":231274421,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"startBinding":{"elementId":"QwswnlTb","focus":0.132333157240707,"gap":4.791787652533429},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0,59.370208740234375]]},{"type":"text","version":84,"versionNonce":87746179,"isDeleted":false,"id":"QwswnlTb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-192.4592895507813,"y":-198.72754580307426,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":104294235,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"f8Uzi4SwRvBu9EFRjHf0t","type":"arrow"}],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"rectangle","version":726,"versionNonce":758052653,"isDeleted":false,"id":"7ROID8RLUbPYdA3Pg-am9","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-107.46558125813806,"y":-183.8746464573324,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":2113005077,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342806524,"link":null,"locked":false},{"type":"text","version":197,"versionNonce":985734691,"isDeleted":false,"id":"ZpKNmGDT","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-37.9922888340094,"y":-199.14230825111613,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":1465277301,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"text","version":39,"versionNonce":604080525,"isDeleted":false,"id":"rQd7o4Mi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-7.9922888340094005,"y":-167.28807961673064,"strokeColor":"#000000","backgroundColor":"transparent","width":16,"height":25,"seed":1635862747,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"0","rawText":"0","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0"},{"type":"rectangle","version":956,"versionNonce":940071149,"isDeleted":false,"id":"vEIBqNI4qxu5-18LGiWQE","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":80.32943921211427,"y":-200.77953222584304,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1920351419,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669342809384,"link":null,"locked":false},{"type":"text","version":274,"versionNonce":462606317,"isDeleted":false,"id":"vSFzy3VC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":156.79945412660248,"y":-198.9336149668613,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":487731541,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"text","version":118,"versionNonce":934556003,"isDeleted":false,"id":"RhLxkizO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":186.79945412660248,"y":-171.39498859204417,"strokeColor":"#000000","backgroundColor":"transparent","width":16,"height":25,"seed":425982587,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"0","rawText":"0","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0"},{"type":"arrow","version":1018,"versionNonce":1844951139,"isDeleted":false,"id":"UcskjoFCvHzCqT3uSCxMh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":112.02164244040449,"y":-119.58971927142812,"strokeColor":"#000000","backgroundColor":"transparent","width":28.716396233974365,"height":21.483466515174285,"seed":1512917051,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342809384,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"vEIBqNI4qxu5-18LGiWQE","focus":0.8157109159252531,"gap":4.957139896271883},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[28.716396233974365,-12.348799485426696],[2.3998008391852466,-21.483466515174285]]},{"type":"text","version":101,"versionNonce":784598029,"isDeleted":false,"id":"t43ZZ7QC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":76.42580629006403,"y":-233.23642509449505,"strokeColor":"#000000","backgroundColor":"transparent","width":65,"height":25,"seed":1768232251,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342814493,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"pull up","rawText":"pull up","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"pull up"}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("pullUp1excalidraw.md7");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


Here is the code:

1. Set y-speed to zero so we are still. We could use an if block:

```ad-scratch
title: hitbox, pull up definition
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
if <falling?> then
set [y speed v] to (0)
end
...
~~~
```

One line version in footnote[^4] 


The next step is:

1. Pull up by 1 to cancel the last step, the one that landed in the wall. We only want to do this if we are toucing the wall, and if we are falling. 
* Notice that in the `receive fall` stack we called this myblock with an input of `y speed < 0 ` (this is 1 when we are falling, and 0 when we are not):

```ad-scratch
~~~scratchblock

when I receive [fall v]
...
pull up or down if touching walls or <(y speed) \< [0]> or not::custom
...
~~~
```
-  We send  `y speed < 0 ` into the red boolean called <**falling?**> in the myblock. 

```ad-scratch
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
...
~~~
```

   - <`falling?`> is **1** if we are falling, but **Zero** if we are not falling.
   - Drag the red <`falling?`> into the `change y` block
   - This will change y **only if** we are **both** **touching** the wall and **falling**:

```ad-scratch
title: hitbox, pull up definition
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
if <touching [walls v]> then
set [y speed v] to (0)
change y by <falling?::custom>
end
~~~
```

- <`falling?`> will be 0 if we are going up, and this block won't change y, which is good (for now).
- It only pulls up if we are falling and touching the wall.

```ad-scratch
title: hitbox, pull up definition
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
if <touching [walls v]> then
set [y speed v] to (0)
change y by <falling?::custom>
end
~~~
```

One line version of the pull up routine is in the footnotes [^5]

Here is the diagram again. After we pull up, the speed is 0, which means we stop falling, as we should. This is realistic. When you hit the ground, you stop moving.

<div id="pullUp1excalidraw.md8"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":467,"versionNonce":165867235,"isDeleted":false,"id":"kX6mdJgu6Z9zYzt4QkKQC","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":90,"angle":0,"x":-309.40719526241986,"y":-322.6127524742713,"strokeColor":"#000000","backgroundColor":"#15aabf","width":580.8837890625,"height":409.2378845214844,"seed":524826683,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342816112,"link":null,"locked":false},{"type":"rectangle","version":365,"versionNonce":867167853,"isDeleted":false,"id":"btiQUpFtBA806yPFVw0O4","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-308.62730916341144,"y":-141.68146946119225,"strokeColor":"#000000","backgroundColor":"#fa5252","width":578.7227783203125,"height":52.170654296875,"seed":44219637,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669342806524,"link":null,"locked":false},{"type":"rectangle","version":616,"versionNonce":308165347,"isDeleted":false,"id":"h2uqRkhOXHx654X-XRb_Z","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-262.0369364420573,"y":-183.8746464573324,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":2074835163,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342806524,"link":null,"locked":false},{"type":"arrow","version":337,"versionNonce":1977718989,"isDeleted":false,"id":"f8Uzi4SwRvBu9EFRjHf0t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-155.02411891657368,"y":-168.93575815054083,"strokeColor":"#000000","backgroundColor":"transparent","width":0,"height":59.370208740234375,"seed":231274421,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"startBinding":{"elementId":"QwswnlTb","focus":0.132333157240707,"gap":4.791787652533429},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[0,59.370208740234375]]},{"type":"text","version":84,"versionNonce":87746179,"isDeleted":false,"id":"QwswnlTb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-192.4592895507813,"y":-198.72754580307426,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":104294235,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"f8Uzi4SwRvBu9EFRjHf0t","type":"arrow"}],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"rectangle","version":726,"versionNonce":758052653,"isDeleted":false,"id":"7ROID8RLUbPYdA3Pg-am9","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-107.46558125813806,"y":-183.8746464573324,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":2113005077,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342806524,"link":null,"locked":false},{"type":"text","version":197,"versionNonce":985734691,"isDeleted":false,"id":"ZpKNmGDT","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-37.9922888340094,"y":-199.14230825111613,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":1465277301,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"text","version":39,"versionNonce":604080525,"isDeleted":false,"id":"rQd7o4Mi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-7.9922888340094005,"y":-167.28807961673064,"strokeColor":"#000000","backgroundColor":"transparent","width":16,"height":25,"seed":1635862747,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"0","rawText":"0","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0"},{"type":"rectangle","version":956,"versionNonce":940071149,"isDeleted":false,"id":"vEIBqNI4qxu5-18LGiWQE","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":80.32943921211427,"y":-200.77953222584304,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1920351419,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669342809384,"link":null,"locked":false},{"type":"text","version":274,"versionNonce":462606317,"isDeleted":false,"id":"vSFzy3VC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":156.79945412660248,"y":-198.9336149668613,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":487731541,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"text","version":118,"versionNonce":934556003,"isDeleted":false,"id":"RhLxkizO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":186.79945412660248,"y":-171.39498859204417,"strokeColor":"#000000","backgroundColor":"transparent","width":16,"height":25,"seed":425982587,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342806524,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"0","rawText":"0","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0"},{"type":"arrow","version":1018,"versionNonce":1844951139,"isDeleted":false,"id":"UcskjoFCvHzCqT3uSCxMh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":112.02164244040449,"y":-119.58971927142812,"strokeColor":"#000000","backgroundColor":"transparent","width":28.716396233974365,"height":21.483466515174285,"seed":1512917051,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669342809384,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"vEIBqNI4qxu5-18LGiWQE","focus":0.8157109159252531,"gap":4.957139896271883},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[28.716396233974365,-12.348799485426696],[2.3998008391852466,-21.483466515174285]]},{"type":"text","version":101,"versionNonce":784598029,"isDeleted":false,"id":"t43ZZ7QC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":76.42580629006403,"y":-233.23642509449505,"strokeColor":"#000000","backgroundColor":"transparent","width":65,"height":25,"seed":1768232251,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669342814493,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"pull up","rawText":"pull up","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"pull up"}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("pullUp1excalidraw.md8");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


Note that **order** is important! If instead we `change y` first and then change the speed...

```ad-scratch
~~~scratchblock
define pull up or down if touching walls and <falling?> or not
   if <touching [walls v]> then
       change y by <falling?::custom>
       set [y speed v] to (0)
   end
~~~
```

...after the first step we are not touching the wall, but...

<div id="pullUp2excalidraw.md9"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":456,"versionNonce":2014170363,"isDeleted":false,"id":"kX6mdJgu6Z9zYzt4QkKQC","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":90,"angle":0,"x":-307.98758146963695,"y":-325.6335309486249,"strokeColor":"#000000","backgroundColor":"#15aabf","width":580.8837890625,"height":409.2378845214844,"seed":524826683,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669156330265,"link":null,"locked":false},{"type":"rectangle","version":344,"versionNonce":809665563,"isDeleted":false,"id":"btiQUpFtBA806yPFVw0O4","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-309.00035603841144,"y":-141.91882501132244,"strokeColor":"#000000","backgroundColor":"#fa5252","width":578.7227783203125,"height":52.170654296875,"seed":44219637,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669156202842,"link":null,"locked":false},{"type":"rectangle","version":613,"versionNonce":1311481621,"isDeleted":false,"id":"h2uqRkhOXHx654X-XRb_Z","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-261.6880943661644,"y":-184.1071904026449,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":2074835163,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669156202842,"link":null,"locked":false},{"type":"arrow","version":290,"versionNonce":858867899,"isDeleted":false,"id":"f8Uzi4SwRvBu9EFRjHf0t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-154.18271270952195,"y":-166.59826983046526,"strokeColor":"#000000","backgroundColor":"transparent","width":1.675567626953125,"height":59.69586181640625,"seed":231274421,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669156202842,"link":null,"locked":false,"startBinding":{"elementId":"QwswnlTb","focus":0.0007407326464248657,"gap":7.324716967445852},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.675567626953125,59.69586181640625]]},{"type":"text","version":81,"versionNonce":1240527989,"isDeleted":false,"id":"QwswnlTb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-192.4592895507813,"y":-194.98466872318392,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":104294235,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"f8Uzi4SwRvBu9EFRjHf0t","type":"arrow"}],"updated":1669156202842,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"rectangle","version":971,"versionNonce":1524374325,"isDeleted":false,"id":"vEIBqNI4qxu5-18LGiWQE","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":-96.94336759127094,"y":-210.0129713534471,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1920351419,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669156202842,"link":null,"locked":false},{"type":"text","version":429,"versionNonce":1693327003,"isDeleted":false,"id":"vSFzy3VC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-19.22992122216982,"y":-195.1009494151482,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":487731541,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"44dLB82oMVXvMA_wzfLOo","type":"arrow"}],"updated":1669156202842,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"arrow","version":693,"versionNonce":881169211,"isDeleted":false,"id":"UcskjoFCvHzCqT3uSCxMh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-61.70821595803301,"y":-124.68474592344634,"strokeColor":"#000000","backgroundColor":"transparent","width":27.456711088338537,"height":29.57901888703202,"seed":1512917051,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669156202842,"link":null,"locked":false,"startBinding":null,"endBinding":{"elementId":"vEIBqNI4qxu5-18LGiWQE","focus":0.6448389025672585,"gap":1},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[19.660488030849365,-12.53169133112982],[-7.796223057489172,-29.57901888703202]]},{"type":"text","version":258,"versionNonce":1857851893,"isDeleted":false,"id":"t43ZZ7QC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-97.4621331630608,"y":-240.4428714242476,"strokeColor":"#000000","backgroundColor":"transparent","width":65,"height":25,"seed":1768232251,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669156202842,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"pull up","rawText":"pull up","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"pull up"},{"type":"arrow","version":343,"versionNonce":1451586523,"isDeleted":false,"id":"44dLB82oMVXvMA_wzfLOo","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":19.39937745528882,"y":-166.42398015550145,"strokeColor":"#000000","backgroundColor":"transparent","width":1.675567626953125,"height":59.69586181640625,"seed":1066318587,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669156202842,"link":null,"locked":false,"startBinding":{"elementId":"vSFzy3VC","focus":0.2655967455293468,"gap":3.6769692596467394},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.675567626953125,59.69586181640625]]},{"type":"rectangle","version":1016,"versionNonce":1436584789,"isDeleted":false,"id":"szdJ8c_tnKgqDPAvWjN_v","fillStyle":"solid","strokeWidth":1,"strokeStyle":"solid","roughness":2,"opacity":100,"angle":0,"x":113.65481514284465,"y":-209.50058983883142,"strokeColor":"#000000","backgroundColor":"#4c6ef5","width":57.265625,"height":54.74920654296875,"seed":1140882325,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"UcskjoFCvHzCqT3uSCxMh","type":"arrow"}],"updated":1669156202842,"link":null,"locked":false},{"type":"text","version":495,"versionNonce":886783221,"isDeleted":false,"id":"Ayia79E8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":181.8590562142732,"y":-195.59811639108779,"strokeColor":"#000000","backgroundColor":"transparent","width":76,"height":25,"seed":162400853,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"RSHGkcLSqwCNXqkXrhEHI","type":"arrow"}],"updated":1669156211044,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"speed y","rawText":"speed y","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"speed y"},{"type":"arrow","version":490,"versionNonce":698130133,"isDeleted":false,"id":"RSHGkcLSqwCNXqkXrhEHI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":220.48835489173186,"y":-166.92114713144105,"strokeColor":"#000000","backgroundColor":"transparent","width":1.675567626953125,"height":59.69586181640625,"seed":936259963,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1669156211196,"link":null,"locked":false,"startBinding":{"elementId":"Ayia79E8","focus":-0.028248663575349633,"gap":3.6769692596467394},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1.675567626953125,59.69586181640625]]},{"type":"text","version":148,"versionNonce":1127183579,"isDeleted":false,"id":"CSBAxIxD","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":81.11407853570182,"y":-294.51605353163285,"strokeColor":"#000000","backgroundColor":"transparent","width":168,"height":75,"seed":1454111797,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1669156332769,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"am I still falling,\nor did I just\nget pulled up?","rawText":"am I still falling,\nor did I just\nget pulled up?","baseline":68,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"am I still falling,\nor did I just\nget pulled up?"}],"appState":{"theme":"dark","viewBackgroundColor":"transparent","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStrokeSharpness":"sharp","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemLinearStrokeSharpness":"round","gridSize":null,"colorPalette":{}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("pullUp2excalidraw.md9");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

...we are still going down. We are kind of back where we started, in the air and falling. And, we don't know if we touched a wall to get here or whether we were just falling, so *we don't know if we should change the yspeed or not*. It won't work. 

## Testing jumps

To test out jumping, we use the up arrow key to change y. The second line lets us keep pressing the  up arrow as long as we are moving slowly (in either direction). 

```ad-scratch
title: hitbox, jumping test
~~~scratchblock
when [up arrow v] key pressed
change y by (50)
wait until < ((abs v) of (yspeed))  < (8) >
~~~
```

Step 1 is finished. It works okay but not perfectly. For example, it doesn't work if we hit a platform from below. We will have to fix it in [[Digital Garden/Torchlight Platformer Part 2|Torchlight Platformer Part 2]]


---
##### Footnotes:

[^1]: The reason will become clear later.
[^2]: Add the two conditions together (left - right)  to get:
	```ad-scratch
	~~~scratchblock
	define set xspeed
	if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
	  left - right
	  change [x speed v] by (<(x speed) \< [0]> - <(x speed) \> [0]>)
	else
	end
	~~~
	```
	In the else part of the if/else block:
	
	```ad-scratch
	~~~scratchblock
	change [x speed v] by (<key [right arrow v] pressed?> - <key [left arrow v] pressed?>)
	~~~
	```
[^3]: You can do this:
	```ad-scratch
	~~~scratchblock
	define change y  by (speed)  in steps. stop at wall.
	repeat ([abs v] of (speed::custom)::operators)
	   change y by ((-1) * <not <touching [walls v]?>>)
	end
	~~~
	```
Notice that you can read the * in the `change y` block as **IF**: change y by -1 **IF** not touching walls. This is a very handy trick and we use it a lot.


[^4]: This is a one line way to do it:  
	```ad-scratch
	~~~scratchblock
	change [y speed v] by (<touching [walls v]?> * ((-1) * (y speed)))
	~~~
	```
All together:
	```ad-scratch
	~~~scratchblock
	define set xspeed
    if <<not <key [left arrow v] pressed?>> and <not <key [right arrow v] pressed?>>> then
	    change [x speed v] by (<(x speed) \< [0]> - <(x speed) \> [0]>)
	else
	   change [x speed v] by (<key [right arrow v] pressed?> - <key [left arrow v] pressed?>)
	end
	~~~
	```
[^5]: This is the pull up routine using oneliners:
	```ad-scratch
	title: hitbox, pull up definition
	~~~scratchblock
	define pull up or down if touching walls and <falling?> or not
	set [y speed v] to ((y speed) - (<touching [walls v]?> * (y speed)))
	change y by (<falling?> * <touching [walls v]?>)
	...
	~~~
	```
